import{d as C,i as $,r as v,u as z,L as T,k as D,o as l,c as m,w as a,e as I,h as M,f as i,g as p,t as f,$ as _,_ as P,a1 as b,B as j,m as x}from"./index-B2ucaEoh.js";import{u as F}from"./movie-DrU7T6z3.js";import{_ as V}from"./p-DLLSr1q7.js";import{_ as L}from"./Rate-RgF_t7Gg.js";const R=["src"],E=C({name:"MovieCard",__name:"movie-card",props:{movie:{},sort:{}},setup(d){const o=d,g=$(),n=v(""),s=v(!1);function h(){const e=o.movie;s.value=!s.value,e.favorite=s.value,e.favoriteTime=Date.now(),F(e).then(t=>{var r;t.data&&((r=window.$message)==null||r.success(e.favorite?_("common.addFavorite"):_("common.removeFavorite")))})}const w=z();function c(e){w.routerPushByKey("detail-page_video",{query:{num:e.num}})}return T(()=>o.sort,()=>{o.sort==="createdTime"?n.value=new Date(o.movie.createdTime).toLocaleDateString():o.sort==="title"?n.value=o.movie.year.toString():n.value=o.movie[o.sort]},{immediate:!0}),D(()=>{s.value=o.movie.favorite}),(e,t)=>{const r=P,y=b,N=j,u=V,S=L,k=x;return l(),m(k,{bordered:!1,size:"small",class:"relative z-4 rd-12px text-center",hoverable:""},{cover:a(()=>[I("img",{src:M(g).projectSettings.serviceUrl+e.movie.poster,class:"h-72 w-48 cursor-pointer transition-transform duration-300 hover:transform-scale-120",onClick:t[0]||(t[0]=B=>c(e.movie))},null,8,R)]),default:a(()=>[i(N,{text:"",class:"pointer-events-auto absolute-tr z-10 mr-4 mt-64 font-size-5",onClick:h},{default:a(()=>[i(y,null,{default:a(()=>[i(r,{class:"inline-flex",icon:s.value?"fluent-emoji-flat:heart-suit":"fluent-emoji-flat:grey-heart"},null,8,["icon"])]),_:1})]),_:1}),i(u,{class:"line-clamp-2 ma-0 cursor-pointer pt-1",onClick:t[1]||(t[1]=B=>c(e.movie))},{default:a(()=>[p(f(e.movie.title),1)]),_:1}),e.sort!="personalScore"?(l(),m(u,{key:0,depth:"3",class:"ma-0"},{default:a(()=>[p(f(n.value),1)]),_:1})):(l(),m(S,{key:1,value:e.movie.personalScore,"allow-half":"",readonly:"",size:"small",class:"mt-1"},null,8,["value"]))]),_:1})}}});export{E as _};
