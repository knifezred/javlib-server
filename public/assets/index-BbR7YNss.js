import{_ as h}from"./movie-card.vue_vue_type_script_setup_true_lang-D9t6ewE2.js";import{d as x,n as B,u as C,r as n,j as N,o as _,c as g,w as u,f as m,g as P,t as v,h as d,b as w,k as M,F as U}from"./index-CKOHag-y.js";import{p as F}from"./library-D4JW-QQB.js";import{f as R}from"./movie-COQLQBWO.js";import{_ as D}from"./Space-DOnezgPU.js";import{_ as L}from"./Pagination-Cqkekt9-.js";import{_ as T}from"./PageHeader-9dHWlS68.js";import{_ as V}from"./Flex-mlOFTHkc.js";import"./headers-Bl_Kd_Jk.js";import"./p-BYwIBpBM.js";import"./get-slot-Bk_rJcZu.js";import"./prop-BjyUHhTu.js";const X=x({name:"detail-page_video-list",__name:"index",setup($){const a=B(),{routerBack:f}=C(),o=n(""),i=n([]),e=n({sort:"year",sortRule:"ASC",page:1,pageSize:20}),l=n(1),p=n(0);function c(){a.query.studio&&(e.value.studio=a.query.studio,o.value=e.value.studio),a.query.series&&(e.value.series=a.query.series,o.value=e.value.series),a.query.type&&a.query.key&&a.query.type==="tag"&&(e.value.tag=a.query.key,o.value=e.value.tag),a.query.actress&&(e.value.actress=a.query.actress,o.value=e.value.actress),R(e.value).then(s=>{s.data?(i.value=s.data.records,l.value=Math.ceil(s.data.total/e.value.pageSize),p.value=s.data.total):(i.value=[],l.value=1,p.value=0)})}return N(()=>{c()}),(s,r)=>{const y=h,z=D,k=L,S=T,q=V;return _(),g(q,{vertical:""},{default:u(()=>[m(S,{onBack:d(f)},{title:u(()=>[P(v(o.value)+"（"+v(p.value)+"）",1)]),footer:u(()=>[m(k,{page:e.value.page,"onUpdate:page":r[0]||(r[0]=t=>e.value.page=t),"page-size":e.value.pageSize,"onUpdate:pageSize":r[1]||(r[1]=t=>e.value.pageSize=t),"page-count":l.value,"show-size-picker":"",class:"ma-auto",simple:"","page-sizes":d(F),onUpdatePage:c,onUpdatePageSize:c},null,8,["page","page-size","page-count","page-sizes"])]),default:u(()=>[m(z,null,{default:u(()=>[(_(!0),w(U,null,M(i.value,t=>(_(),g(y,{key:t.id,movie:t,"show-second-title":!1,class:"w-64",sort:e.value.sort},null,8,["movie","sort"]))),128))]),_:1})]),_:1},8,["onBack"])]),_:1})}}});export{X as default};
