import{r as W,a as x,ac as j,ad as A,d as $,ae as D,o as b,b as S,e as d,af as H,ag as z,c as R,w as l,p as Z,f as o,h as n,$ as r,g as k,t as y,l as L,B,ah as q,u as O,i as J,ai as K,aj as Q,ak as X,al as Y,W as ee,am as N,an as oe,ao as ne,ap as te,s as le}from"./index-G0XXQiiJ.js";import{u as F,a as U,R as ae}from"./form-BZAAd0VG.js";import{_ as M,a as I}from"./FormItem-CBeD6pwd.js";import{_ as E}from"./Space-DdY25akT.js";import"./get-slot-Bk_rJcZu.js";function se(v){const i=W(0),u=x(()=>Math.ceil(i.value/60)),s=x(()=>i.value>0),{pause:p,resume:C}=j(()=>{i.value>0?i.value-=1:p()},{immediate:!1});function f(h=v){i.value=60*h,C()}function e(){i.value=0,p()}return A(()=>{p()}),{count:u,isCounting:s,start:f,stop:e}}const re={class:"absolute-lt z-1 size-full overflow-hidden"},ce={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},pe={height:"1337",width:"1337"},de={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},ie=["stop-color"],ue=["stop-color"],me={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},_e={height:"896",width:"967.8852157128662"},fe={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},ge=["stop-color"],he=["stop-color"],we=$({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(v){const g=v,i=x(()=>D(g.themeColor,200)),u=x(()=>D(g.themeColor,500));return(s,p)=>(b(),S("div",re,[d("div",ce,[(b(),S("svg",pe,[d("defs",null,[p[0]||(p[0]=d("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),d("linearGradient",de,[d("stop",{offset:"0","stop-color":i.value,"stop-opacity":"1"},null,8,ie),d("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,ue)])]),p[1]||(p[1]=d("g",{opacity:"1"},[d("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),d("div",me,[(b(),S("svg",_e,[d("defs",null,[p[2]||(p[2]=d("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),d("linearGradient",fe,[d("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,ge),d("stop",{offset:"1","stop-color":i.value,"stop-opacity":"1"},null,8,he)])]),p[3]||(p[3]=d("g",{opacity:"1"},[d("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),ve=$({name:"PwdLogin",__name:"pwd-login",setup(v){const g=H(),{formRef:i,validate:u}=F(),s=z({url:`${window.location.protocol}//${window.location.host}`,password:""}),p=x(()=>{const{formRules:f}=U();return{url:f.url,password:f.pwd}});async function C(){await u(),await g.login(s.url,s.password)}return(f,e)=>{const h=L,m=M,a=B,t=E,_=I;return b(),R(_,{ref_key:"formRef",ref:i,model:s,rules:p.value,size:"large","show-label":!1},{default:l(()=>[Z("",!0),o(m,{path:"password"},{default:l(()=>[o(h,{value:s.password,"onUpdate:value":e[1]||(e[1]=c=>s.password=c),type:"password","show-password-on":"click",placeholder:n(r)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(t,{vertical:"",size:24},{default:l(()=>[o(a,{type:"primary",size:"large",round:"",block:"",loading:n(g).loginLoading,onClick:C},{default:l(()=>[k(y(n(r)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}});function V(){const{loading:v,startLoading:g,endLoading:i}=q(),{count:u,start:s,stop:p,isCounting:C}=se(10),f=x(()=>{let m=r("page.login.codeLogin.getCode");const a=r("page.login.codeLogin.reGetCode",{time:u.value});return v.value&&(m=""),C.value&&(m=a),m});function e(m){var a,t,_,c;return m.trim()===""?((t=(a=window.$message)==null?void 0:a.error)==null||t.call(a,r("form.phone.required")),!1):ae.test(m)?!0:((c=(_=window.$message)==null?void 0:_.error)==null||c.call(_,r("form.phone.invalid")),!1)}async function h(m){var t,_;!e(m)||v.value||(g(),await new Promise(c=>{setTimeout(c,500)}),(_=(t=window.$message)==null?void 0:t.success)==null||_.call(t,r("page.login.codeLogin.sendCodeSuccess")),s(),i())}return{label:f,start:s,stop:p,isCounting:C,loading:v,getCaptcha:h}}const Ce={class:"w-full flex-y-center gap-16px"},xe=$({name:"CodeLogin",__name:"code-login",setup(v){const{toggleLoginModule:g}=O(),{formRef:i,validate:u}=F(),{label:s,isCounting:p,loading:C,getCaptcha:f}=V(),e=z({phone:"",code:""}),h=x(()=>{const{formRules:a}=U();return{phone:a.phone,code:a.code}});async function m(){var a;await u(),(a=window.$message)==null||a.success(r("page.login.common.validateSuccess"))}return(a,t)=>{const _=L,c=M,P=B,G=E,T=I;return b(),R(T,{ref_key:"formRef",ref:i,model:e,rules:h.value,size:"large","show-label":!1},{default:l(()=>[o(c,{path:"phone"},{default:l(()=>[o(_,{value:e.phone,"onUpdate:value":t[0]||(t[0]=w=>e.phone=w),placeholder:n(r)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(c,{path:"code"},{default:l(()=>[d("div",Ce,[o(_,{value:e.code,"onUpdate:value":t[1]||(t[1]=w=>e.code=w),placeholder:n(r)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(P,{size:"large",disabled:n(p),loading:n(C),onClick:t[2]||(t[2]=w=>n(f)(e.phone))},{default:l(()=>[k(y(n(s)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(G,{vertical:"",size:18,class:"w-full"},{default:l(()=>[o(P,{type:"primary",size:"large",round:"",block:"",onClick:m},{default:l(()=>[k(y(n(r)("common.confirm")),1)]),_:1}),o(P,{size:"large",round:"",block:"",onClick:t[3]||(t[3]=w=>n(g)("pwd-login"))},{default:l(()=>[k(y(n(r)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ye={class:"w-full flex-y-center gap-16px"},be=$({name:"Register",__name:"register",setup(v){const{toggleLoginModule:g}=O(),{formRef:i,validate:u}=F(),{label:s,isCounting:p,loading:C,getCaptcha:f}=V(),e=z({phone:"",code:"",password:"",confirmPassword:""}),h=x(()=>{const{formRules:a,createConfirmPwdRule:t}=U();return{phone:a.phone,code:a.code,password:a.pwd,confirmPassword:t(e.password)}});async function m(){var a;await u(),(a=window.$message)==null||a.success(r("page.login.common.validateSuccess"))}return(a,t)=>{const _=L,c=M,P=B,G=E,T=I;return b(),R(T,{ref_key:"formRef",ref:i,model:e,rules:h.value,size:"large","show-label":!1},{default:l(()=>[o(c,{path:"phone"},{default:l(()=>[o(_,{value:e.phone,"onUpdate:value":t[0]||(t[0]=w=>e.phone=w),placeholder:n(r)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(c,{path:"code"},{default:l(()=>[d("div",ye,[o(_,{value:e.code,"onUpdate:value":t[1]||(t[1]=w=>e.code=w),placeholder:n(r)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(P,{size:"large",disabled:n(p),loading:n(C),onClick:t[2]||(t[2]=w=>n(f)(e.phone))},{default:l(()=>[k(y(n(s)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(c,{path:"password"},{default:l(()=>[o(_,{value:e.password,"onUpdate:value":t[3]||(t[3]=w=>e.password=w),type:"password","show-password-on":"click",placeholder:n(r)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(c,{path:"confirmPassword"},{default:l(()=>[o(_,{value:e.confirmPassword,"onUpdate:value":t[4]||(t[4]=w=>e.confirmPassword=w),type:"password","show-password-on":"click",placeholder:n(r)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(G,{vertical:"",size:18,class:"w-full"},{default:l(()=>[o(P,{type:"primary",size:"large",round:"",block:"",onClick:m},{default:l(()=>[k(y(n(r)("common.confirm")),1)]),_:1}),o(P,{size:"large",round:"",block:"",onClick:t[5]||(t[5]=w=>n(g)("pwd-login"))},{default:l(()=>[k(y(n(r)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ke=$({name:"ResetPwd",__name:"reset-pwd",setup(v){const{toggleLoginModule:g}=O(),{formRef:i,validate:u}=F(),s=z({phone:"",code:"",password:"",confirmPassword:""}),p=x(()=>{const{formRules:f,createConfirmPwdRule:e}=U();return{phone:f.phone,password:f.pwd,confirmPassword:e(s.password)}});async function C(){var f;await u(),(f=window.$message)==null||f.success(r("page.login.common.validateSuccess"))}return(f,e)=>{const h=L,m=M,a=B,t=E,_=I;return b(),R(_,{ref_key:"formRef",ref:i,model:s,rules:p.value,size:"large","show-label":!1},{default:l(()=>[o(m,{path:"phone"},{default:l(()=>[o(h,{value:s.phone,"onUpdate:value":e[0]||(e[0]=c=>s.phone=c),placeholder:n(r)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(m,{path:"code"},{default:l(()=>[o(h,{value:s.code,"onUpdate:value":e[1]||(e[1]=c=>s.code=c),placeholder:n(r)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(m,{path:"password"},{default:l(()=>[o(h,{value:s.password,"onUpdate:value":e[2]||(e[2]=c=>s.password=c),type:"password","show-password-on":"click",placeholder:n(r)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(m,{path:"confirmPassword"},{default:l(()=>[o(h,{value:s.confirmPassword,"onUpdate:value":e[3]||(e[3]=c=>s.confirmPassword=c),type:"password","show-password-on":"click",placeholder:n(r)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(t,{vertical:"",size:18,class:"w-full"},{default:l(()=>[o(a,{type:"primary",size:"large",round:"",block:"",onClick:C},{default:l(()=>[k(y(n(r)("common.confirm")),1)]),_:1}),o(a,{size:"large",round:"",block:"",onClick:e[4]||(e[4]=c=>n(g)("pwd-login"))},{default:l(()=>[k(y(n(r)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Pe=$({name:"BindWechat",__name:"bind-wechat",setup(v){return(g,i)=>(b(),S("div"))}}),$e={class:"w-400px lt-sm:w-300px"},Ne={class:"flex-y-center justify-between"},Se={class:"text-28px text-primary font-500 lt-sm:text-22px"},Re={class:"i-flex-col"},ze={class:"pt-24px"},Le={class:"text-18px text-primary font-medium"},Be={class:"pt-24px"},Ge=$({name:"login",__name:"index",props:{module:{}},setup(v){const g=v,i=J(),u=K(),s={"pwd-login":{label:N["pwd-login"],component:ve},"code-login":{label:N["code-login"],component:xe},register:{label:N.register,component:be},"reset-pwd":{label:N["reset-pwd"],component:ke},"bind-wechat":{label:N["bind-wechat"],component:Pe}},p=x(()=>s[g.module||"pwd-login"]),C=x(()=>u.darkMode?D(u.themeColor,600):u.themeColor),f=x(()=>{const e="#ffffff",h=u.darkMode?.5:.2;return Q(e,u.themeColor,h)});return(e,h)=>{const m=we,a=oe,t=ne,_=te,c=le;return b(),S("div",{class:"relative size-full flex-center overflow-hidden",style:ee({backgroundColor:f.value})},[o(m,{"theme-color":C.value},null,8,["theme-color"]),o(c,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:l(()=>[d("div",$e,[d("header",Ne,[o(a,{class:"text-64px text-primary lt-sm:text-48px"}),d("h3",Se,y(n(r)("system.title")),1),d("div",Re,[o(t,{"theme-schema":n(u).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:n(u).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),o(_,{lang:n(i).locale,"lang-options":n(i).localeOptions,"show-tooltip":!1,onChangeLang:n(i).changeLocale},null,8,["lang","lang-options","onChangeLang"])])]),d("main",ze,[d("h3",Le,y(n(r)(p.value.label)),1),d("div",Be,[o(X,{name:n(u).page.animateMode,mode:"out-in",appear:""},{default:l(()=>[(b(),R(Y(p.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{Ge as default};
