import{d as q,i as K,r as d,j as H,aL as z,o as r,c as p,w as t,f as a,h as C,g as S,t as T,p as f,b as U,k as D,F as P,l as J,bG as Q,bz as W,bN as X,B as Y,_ as Z,aj as ee,b9 as ae,bO as te,bP as le,s as oe}from"./index-CKOHag-y.js";import{_ as ne}from"./actress-card.vue_vue_type_script_setup_true_lang-U-08T1gE.js";import{_ as F}from"./favorite-card-group.vue_vue_type_script_setup_true_lang-Dund7ZIY.js";import{_ as se}from"./movie-card.vue_vue_type_script_setup_true_lang-D9t6ewE2.js";import{s as ue,p as ie}from"./library-D4JW-QQB.js";import{g as re,b as ve}from"./actress-D6qzUQAb.js";import{g as pe,f as me}from"./movie-COQLQBWO.js";import{_ as de,a as _e}from"./FormItem-B8gPcFJQ.js";import{_ as ce}from"./Space-DOnezgPU.js";import{_ as fe,a as ge}from"./CollapseItem-DuMauWb0.js";import{_ as be}from"./Pagination-Cqkekt9-.js";import{_ as ye}from"./Flex-mlOFTHkc.js";import"./p-BYwIBpBM.js";import"./text-CtgHp5iY.js";import"./Rate-c-BPAtkZ.js";import"./headers-Bl_Kd_Jk.js";import"./get-slot-Bk_rJcZu.js";import"./prop-BjyUHhTu.js";const Le=q({name:"favorites",__name:"index",setup(ke){const w=K(),n=d({movie:0,actress:0,studio:0,series:0}),u=d({movie:[],actress:[],studio:[],series:[]}),i=d("movie"),h=d(!0),o=d({page:1,pageSize:20,keyword:"",name:"",viewCount:-1,sort:"favoriteTime",sortRule:"DESC",folder:null,favorite:!0}),I=[{label:"收藏时间",value:"favoriteTime"},{label:"更新时间",value:"updatedTime"},{label:"年份",value:"year"},{label:"番号",value:"num"},{label:"综合评分",value:"score"},{label:"个人评分",value:"personalScore"},{label:"添加时间",value:"createdTime"},{label:"上映时间",value:"releaseTime"},{label:"播放次数",value:"viewCount"}],_=d(1);function v(s){switch(i.value=s,w.setCacheSearchData({currentTab:i.value,searchData:o.value}),i.value!=="movie"&&(o.value.sort="updatedTime",o.value.name=o.value.keyword),i.value){case"movie":h.value=!0,me(o.value).then(e=>{e.data!==null?(u.value.movie=e.data.records,n.value.movie=e.data.total,_.value=Math.ceil(e.data.total/o.value.pageSize)):(u.value.movie=[],n.value.movie=0,_.value=0)});break;case"actress":ve(o.value).then(e=>{e.data!==null?(u.value.actress=e.data.records,n.value.actress=e.data.total,_.value=Math.ceil(e.data.total/o.value.pageSize)):(u.value.actress=[],n.value.actress=0,_.value=0)});break;default:h.value=!1;break}}function B(){o.value={keyword:"",name:"",viewCount:-1,favorite:!0,folder:null,sort:"favoriteTime",sortRule:"DESC",pageSize:20,page:1},v(i.value)}return H(()=>{const s=w.getCacheSearchData();s&&(i.value=s.data.currentTab,o.value=s.data.searchData),v(i.value),pe().then(e=>{e.data?n.value.movie=e.data:n.value.movie=0}),re().then(e=>{e.data?n.value.actress=e.data:n.value.actress=0}),z("favorite_series").then(e=>{e.data?(u.value.series=e.data.value.split("|"),n.value.series=u.value.series.length):(u.value.series=[],n.value.series=0)}),z("favorite_studio").then(e=>{e.data?(u.value.studio=e.data.value.split("|"),n.value.studio=u.value.studio.length):(u.value.studio=[],n.value.studio=0)})}),(s,e)=>{const M=J,R=Q,m=de,$=W,x=X,N=Y,c=ce,E=_e,L=fe,O=ge,g=Z,b=ee,y=ae,k=te,V=le,j=be,A=oe,G=ye;return r(),p(G,null,{default:t(()=>[a(A,{bordered:!1,class:"relative z-4 w-full rd-12px"},{default:t(()=>[a(O,{"default-expanded-names":["1"],class:"mb-xl"},{default:t(()=>[a(L,{title:s.$t("common.search"),name:"1"},{default:t(()=>[a(E,{"label-placement":"left","label-width":85,"require-mark-placement":"right-hanging",size:"small"},{default:t(()=>[a(m,{label:s.$t("page.library.searchKey")},{default:t(()=>[a(R,null,{default:t(()=>[a(M,{value:o.value.keyword,"onUpdate:value":e[0]||(e[0]=l=>o.value.keyword=l),type:"text",placeholder:"请输入标题关键词",class:"max-w-xl"},null,8,["value"])]),_:1})]),_:1},8,["label"]),a(c,{"item-style":"display: flex;",align:"center"},{default:t(()=>[a(m,{label:s.$t("common.sort")},{default:t(()=>[a($,{value:o.value.sort,"onUpdate:value":[e[1]||(e[1]=l=>o.value.sort=l),e[2]||(e[2]=l=>v(i.value))],options:I,class:"w-40"},null,8,["value"])]),_:1},8,["label"]),a(m,null,{default:t(()=>[a($,{value:o.value.sortRule,"onUpdate:value":[e[3]||(e[3]=l=>o.value.sortRule=l),e[4]||(e[4]=l=>v(i.value))],options:C(ue),class:"w-40"},null,8,["value","options"])]),_:1}),a(m,null,{default:t(()=>[a(x,{value:o.value.viewCount,"onUpdate:value":e[5]||(e[5]=l=>o.value.viewCount=l),"checked-value":0,"unchecked-value":-1,onUpdateValue:e[6]||(e[6]=l=>v(i.value))},{checked:t(()=>e[12]||(e[12]=[S("未播放")])),unchecked:t(()=>e[13]||(e[13]=[S("全部")])),_:1},8,["value"])]),_:1}),a(m,null,{default:t(()=>[a(N,{type:"primary",onClick:e[7]||(e[7]=l=>v(i.value))},{default:t(()=>[S(T(s.$t("common.search")),1)]),_:1})]),_:1}),a(m,null,{default:t(()=>[a(N,{type:"default",ghost:"",onClick:B},{default:t(()=>[S(T(s.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),a(V,{value:i.value,"justify-content":"space-evenly",type:"card",animated:"","onUpdate:value":v},{default:t(()=>[a(k,{name:"movie",tab:s.$t("page.favorites.movie")+"（"+n.value.movie+"）"},{default:t(()=>[n.value.movie==0?(r(),p(y,{key:0,size:"large",class:"ma-auto",description:"什么也没有"},{icon:t(()=>[a(b,null,{default:t(()=>[a(g,{icon:"solar:hand-heart-bold-duotone"})]),_:1})]),_:1})):f("",!0),a(c,{class:"ma-4"},{default:t(()=>[(r(!0),U(P,null,D(u.value.movie,l=>(r(),p(se,{key:l.file,movie:l,class:"w-64",sort:"score"},null,8,["movie"]))),128))]),_:1})]),_:1},8,["tab"]),a(k,{name:"actress",tab:s.$t("route.category_actress")+"（"+n.value.actress+"）"},{default:t(()=>[n.value.actress==0?(r(),p(y,{key:0,size:"large",class:"ma-auto",description:"什么也没有"},{icon:t(()=>[a(b,null,{default:t(()=>[a(g,{icon:"solar:hand-heart-bold-duotone"})]),_:1})]),_:1})):f("",!0),a(c,{class:"ma-4"},{default:t(()=>[(r(!0),U(P,null,D(u.value.actress,l=>(r(),p(ne,{key:l.name,"show-second-title":!0,actress:l,sort:"score"},null,8,["actress"]))),128))]),_:1})]),_:1},8,["tab"]),a(k,{name:"studio",tab:s.$t("route.category_studio")+"（"+n.value.studio+"）"},{default:t(()=>[n.value.studio==0?(r(),p(y,{key:0,size:"large",class:"ma-auto",description:"什么也没有"},{icon:t(()=>[a(b,null,{default:t(()=>[a(g,{icon:"solar:hand-heart-bold-duotone"})]),_:1})]),_:1})):f("",!0),a(c,null,{default:t(()=>[a(F,{keys:u.value.studio,"storage-key":"favorite_studio",type:"studio"},null,8,["keys"])]),_:1})]),_:1},8,["tab"]),a(k,{name:"series",tab:s.$t("route.category_series")+"（"+n.value.series+"）"},{default:t(()=>[n.value.series==0?(r(),p(y,{key:0,size:"large",class:"ma-auto",description:"什么也没有"},{icon:t(()=>[a(b,null,{default:t(()=>[a(g,{icon:"solar:hand-heart-bold-duotone"})]),_:1})]),_:1})):f("",!0),a(c,null,{default:t(()=>[a(F,{keys:u.value.series,"storage-key":"favorite_series",type:"series"},null,8,["keys"])]),_:1})]),_:1},8,["tab"])]),_:1},8,["value"]),h.value?(r(),p(j,{key:0,page:o.value.page,"onUpdate:page":e[8]||(e[8]=l=>o.value.page=l),"page-size":o.value.pageSize,"onUpdate:pageSize":e[9]||(e[9]=l=>o.value.pageSize=l),"page-count":_.value,"show-size-picker":"","page-sizes":C(ie),onUpdatePage:e[10]||(e[10]=l=>v(i.value)),onUpdatePageSize:e[11]||(e[11]=l=>v(i.value))},null,8,["page","page-size","page-count","page-sizes"])):f("",!0)]),_:1})]),_:1})}}});export{Le as default};
