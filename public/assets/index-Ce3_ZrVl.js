import{_ as se}from"./movie-card.vue_vue_type_script_setup_true_lang-CX2NC1kF.js";import{d as L,i as W,r as y,j as J,o as g,c as H,w as t,f as e,e as n,h as c,g as w,t as f,$ as m,b as N,k as A,F as B,l as ne,m as ue,B as K,n as ie,p as re,q as de,_ as pe,s as ce,v as ve,x as _e,y as me,z as fe}from"./index-G0XXQiiJ.js";import{b as ge,c as T,p as q}from"./library-D4JW-QQB.js";import{u as Q,c as be,f as ye,a as E}from"./actress-C1DBjAjN.js";import{f as we}from"./movie-DpZnKH93.js";import{_ as xe,a as he}from"./Grid-DVzNts1A.js";import{N as Se,a as Ne,b as ze}from"./headers-CFrI0wwt.js";import{_ as X}from"./Space-DdY25akT.js";import{_ as Ce,a as Ue}from"./FormItem-CBeD6pwd.js";import{_ as He,a as ke,b as je}from"./RadioButton-Bzu2qCHD.js";import{_ as Z}from"./Rate-C5zU23XB.js";import{_ as $e}from"./DynamicTags-Bsr0ygzx.js";import{_ as De}from"./text-oUQLZaH4.js";import{_ as Ae}from"./Pagination-7NdVwkNR.js";import{_ as Be}from"./p-CrdgHcto.js";import"./get-slot-Bk_rJcZu.js";import"./prop-BjyUHhTu.js";const Fe=["src"],Me=L({name:"ActressModifyDrawer",__name:"modify-drawer",props:{info:{}},emits:["close","setAvatar"],setup(V,{emit:k}){const M=W(),j=k,u=V,a=y({createdTime:0,favorite:!1,score:0,personalScore:0,category:"",name:"",alias:"",introduction:"",avatar:"",cover:"",tags:"",birthday:"",videoCount:0,bust:0,waist:0,hip:0,face:0,body:0,cup:0,bodySize:"",bodyHeight:0,debutDate:""}),h=y([]);function _(){a.value.tags=`|${h.value.join("|")}|`,a.value.id!==void 0&&a.value.id>0?Q(a.value).then(()=>{var i;(i=window.$message)==null||i.success(m("common.updateSuccess"))}):be(a.value).then(()=>{var i;(i=window.$message)==null||i.success(m("common.addSuccess"))}),j("close")}function z(){j("setAvatar")}function b(){console.log(a.value.score);let i=a.value.face*.3+a.value.body*.1;const s=Number.parseInt(a.value.birthday.substring(0,4),10),d=new Date().getFullYear();d-s<=24?i+=1:d-s>24&&(i+=i+1-(d-s-24)*.1),a.value.cup<3?i+=a.value.cup*.05:a.value.cup>=3&&a.value.cup<7?i+=a.value.cup*.1:i+=(T.length-a.value.cup)*.08,a.value.bodyHeight<155?i+=.1:a.value.bodyHeight>=155&&a.value.bodyHeight<160?i+=.2:a.value.bodyHeight>=160&&a.value.bodyHeight<166?i+=.4:a.value.bodyHeight>=165&&a.value.bodyHeight<170||a.value.bodyHeight>=170&&a.value.bodyHeight<175?i+=.5:i+=.4,a.value.score=Number.parseFloat(i.toFixed(2))}return J(()=>{u.info!==void 0&&(a.value=u.info,h.value=a.value.tags.split("|").filter(i=>i.length>0))}),(i,s)=>{const d=xe,I=Se,x=X,C=ne,p=Ce,v=ue,l=ke,S=He,$=je,U=Z,P=$e,D=he,F=K,R=Ue;return g(),H(R,{"label-placement":"top","label-width":"100"},{default:t(()=>[e(D,{"x-gap":"12",cols:3},{default:t(()=>[e(d,{span:3}),e(d,null,{default:t(()=>[e(x,{vertical:"",class:"ma-auto text-center"},{default:t(()=>[n("img",{src:c(M).projectSettings.serviceUrl+a.value.avatar,class:"ma-auto h-48 w-48 cursor-pointer rd-md object-cover object-t",onClick:z},null,8,Fe),e(I,null,{default:t(()=>[w(f(a.value.name),1)]),_:1})]),_:1})]),_:1}),e(d,{span:2},{default:t(()=>[e(p,{label:c(m)("page.actress.alias")},{default:t(()=>[e(C,{value:a.value.alias,"onUpdate:value":s[0]||(s[0]=o=>a.value.alias=o),type:"text"},null,8,["value"])]),_:1},8,["label"]),e(p,{label:c(m)("page.actress.introduction")},{default:t(()=>[e(C,{value:a.value.introduction,"onUpdate:value":s[1]||(s[1]=o=>a.value.introduction=o),type:"textarea",rows:5},null,8,["value"])]),_:1},8,["label"])]),_:1}),e(d,null,{default:t(()=>[e(p,{label:c(m)("page.actress.birthday")},{default:t(()=>[e(C,{value:a.value.birthday,"onUpdate:value":s[2]||(s[2]=o=>a.value.birthday=o),type:"text",class:"w-32"},null,8,["value"])]),_:1},8,["label"])]),_:1}),e(d,{span:2},{default:t(()=>[e(x,null,{default:t(()=>[e(p,{label:"胸围/B"},{default:t(()=>[e(v,{value:a.value.bust,"onUpdate:value":s[3]||(s[3]=o=>a.value.bust=o),class:"w-30",onChange:b},null,8,["value"])]),_:1}),e(p,{label:"腰围/W"},{default:t(()=>[e(v,{value:a.value.waist,"onUpdate:value":s[4]||(s[4]=o=>a.value.waist=o),class:"w-30",onChange:b},null,8,["value"])]),_:1}),e(p,{label:"臀围/H"},{default:t(()=>[e(v,{value:a.value.hip,"onUpdate:value":s[5]||(s[5]=o=>a.value.hip=o),class:"w-30",onChange:b},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(d,null,{default:t(()=>[e(p,{label:c(m)("page.actress.debutDate")},{default:t(()=>[e(C,{value:a.value.debutDate,"onUpdate:value":s[6]||(s[6]=o=>a.value.debutDate=o),type:"text",class:"w-32"},null,8,["value"])]),_:1},8,["label"])]),_:1}),e(d,{span:2},{default:t(()=>[e(x,null,{default:t(()=>[e(p,{label:c(m)("page.actress.face")},{default:t(()=>[e(v,{value:a.value.face,"onUpdate:value":[s[7]||(s[7]=o=>a.value.face=o),b],max:10,min:0,class:"w-30"},null,8,["value"])]),_:1},8,["label"]),e(p,{label:c(m)("page.actress.body")},{default:t(()=>[e(v,{value:a.value.body,"onUpdate:value":[s[8]||(s[8]=o=>a.value.body=o),b],max:10,min:0,class:"w-30"},null,8,["value"])]),_:1},8,["label"]),e(p,{label:c(m)("page.actress.bodyHeight")+"(cm)"},{default:t(()=>[e(v,{value:a.value.bodyHeight,"onUpdate:value":s[9]||(s[9]=o=>a.value.bodyHeight=o),class:"w-30",onChange:b},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),e(d,null,{default:t(()=>[e(p,{label:c(m)("page.actress.bodySize")},{default:t(()=>[e(S,{value:a.value.bodySize,"onUpdate:value":s[10]||(s[10]=o=>a.value.bodySize=o),onChange:b},{default:t(()=>[(g(!0),N(B,null,A(c(ge),o=>(g(),H(l,{key:o.value,value:o.value,label:o.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),e(d,{span:3},{default:t(()=>[e(p,{label:c(m)("page.actress.cup")},{default:t(()=>[e(S,{value:a.value.cup,"onUpdate:value":s[11]||(s[11]=o=>a.value.cup=o),onChange:b},{default:t(()=>[(g(!0),N(B,null,A(c(T),o=>(g(),H($,{key:o.label,value:o.value,label:o.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),e(d,null,{default:t(()=>[e(p,{label:"个人评分"},{default:t(()=>[e(U,{value:a.value.personalScore,"onUpdate:value":s[12]||(s[12]=o=>a.value.personalScore=o),"allow-half":""},null,8,["value"])]),_:1})]),_:1}),e(d,{span:2},{default:t(()=>[e(p,{label:"综合评分"},{default:t(()=>[e(U,{value:a.value.score,"onUpdate:value":s[13]||(s[13]=o=>a.value.score=o),"allow-half":"",readonly:"",count:10},null,8,["value"])]),_:1})]),_:1}),e(d,{span:3},{default:t(()=>[e(p,{label:"标签"},{default:t(()=>[e(P,{value:h.value,"onUpdate:value":s[14]||(s[14]=o=>h.value=o)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(F,{"attr-type":"button",onClick:_},{default:t(()=>[w(f(c(m)("common.save")),1)]),_:1})]),_:1})]),_:1})}}}),Ie={class:"pa-0"},Pe={class:"relative overflow-hidden"},Re={class:"absolute inset-0 z-0"},Te=["src"],Ve={class:"relative z-10 mx-auto px-4 py-16 container md:py-24"},Ge={class:"flex flex-col items-center gap-8 md:flex-row"},Oe={class:"h-64 w-64 overflow-hidden rounded-lg shadow-2xl md:h-80 md:w-80"},Ye=["src"],qe={class:"flex-grow text-center md:text-left"},Ee={class:"mb-6 flex flex-wrap justify-center gap-4 md:justify-start"},Le={class:"flex items-center"},We={key:0,class:"text-gray-300"},Je={class:"grid grid-cols-2 mb-6 gap-6 lg:grid-cols-8 sm:grid-cols-4"},Ke={class:"text-2xl text-warning font-bold"},Qe={class:"text-2xl text-warning font-bold"},Xe={class:"text-2xl text-warning font-bold"},Ze={class:"text-2xl text-warning font-bold"},ea={class:"flex flex-wrap justify-center gap-4 md:justify-start"},aa={class:"bg-#222222 px-4 py-12"},ta={class:"bg-#1a1a1a px-4 py-12"},la={class:"mx-auto px-4 py-12 container"},oa=["src"],Sa=L({name:"detail-page_actress",__name:"index",setup(V){const k=W(),M=ie(),j=y(null),u=y({createdTime:0,favorite:!1,score:0,personalScore:0,category:"",name:"",alias:"",introduction:"",avatar:"",cover:"",tags:"",birthday:"",videoCount:0,bust:0,waist:0,hip:0,face:0,body:0,cup:0,bodySize:"",bodyHeight:0,debutDate:""}),a=y([]),h=y(0),_=y({sort:"year",sortRule:"DESC",page:1,pageSize:20}),z=y(1),b=y(0);function i(){_.value.actress=u.value.name,we(_.value).then(v=>{v.data?(a.value=v.data.records,z.value=Math.ceil(v.data.total/_.value.pageSize),b.value=v.data.total):(a.value=[],z.value=1,b.value=0)})}const s=y(!1);function d(){s.value=!0}function I(v){u.value.avatar=v,Q(u.value).then(l=>{var S;l.data&&((S=window.$message)==null||S.success(m("common.modifySuccess")))})}const x=y(!1);function C(){x.value=!0}function p(){x.value=!1}return J(()=>{ye(M.query.name).then(v=>{v.data!==null&&(u.value=v.data,h.value=new Date().getFullYear()-Number.parseInt(u.value.birthday.split("/")[0],10),E(u.value.name,"banner").then(l=>{l.data!==null&&l.data!==""&&(j.value=k.projectSettings.serviceUrl+l.data)}),E(u.value.name,"avatar").then(l=>{console.log(l),l.data!==null&&l.data!==""&&(u.value.avatar=l.data.replace("\\","/"))}),i())})}),(v,l)=>{var Y;const S=Ne,$=De,U=Be,P=Z,D=pe,F=K,R=fe,o=ce,ee=ze,ae=se,G=X,O=Ae,te=ve,le=_e,oe=me;return g(),N("div",Ie,[n("section",Pe,[n("div",Re,[n("img",{src:j.value||"/actor_banner.jpeg",class:"h-full w-full object-cover object-ct"},null,8,Te),l[7]||(l[7]=n("div",{class:"absolute inset-0 from-dark via-dark/90 to-transparent bg-gradient-to-t"},null,-1))]),n("div",Ve,[n("div",Ge,[n("div",Oe,[n("img",{src:c(k).projectSettings.serviceUrl+u.value.avatar,class:"h-full w-full cursor-pointer object-cover object-top",onClick:d},null,8,Ye)]),n("div",qe,[e(S,{class:"font-display mb-2 text-[clamp(2rem,5vw,3.5rem)] color-white font-bold leading-tight text-shadow"},{default:t(()=>[w(f(u.value.name),1)]),_:1}),e(U,{class:"text-gray-3"},{default:t(()=>[w(f(u.value.alias)+" ",1),e($,{class:"text-gray-2"},{default:t(()=>[w("("+f(h.value)+"岁)",1)]),_:1})]),_:1}),n("div",Ee,[n("div",Le,[e(P,{value:u.value.personalScore,"onUpdate:value":l[0]||(l[0]=r=>u.value.personalScore=r),readonly:"","void-icon":"star-o","show-text":!1,"void-color":"#4B5563",color:"#FFB300"},null,8,["value"]),e($,{class:"pl-4 text-gray-300"},{default:t(()=>[w(f(u.value.score)+" (综合评分)",1)]),_:1})]),u.value.birthday.length>0?(g(),N("div",We,[e(D,{icon:"solar:calendar-date-bold-duotone",class:"size-6"}),w(" "+f(u.value.birthday),1)])):re("",!0)]),n("div",Je,[n("div",null,[n("div",Ke,f(u.value.bodySize+(u.value.cup>0?"/"+((Y=c(T).find(r=>r.value==u.value.cup))==null?void 0:Y.label):"")),1),l[8]||(l[8]=n("div",{class:"text-gray-300"},"体型",-1))]),n("div",null,[n("div",Qe,f(u.value.bodyHeight)+" cm",1),l[9]||(l[9]=n("div",{class:"text-gray-300"},"身高",-1))]),n("div",null,[n("div",Xe,f(u.value.debutDate),1),l[10]||(l[10]=n("div",{class:"text-gray-300"},"出道时间",-1))]),n("div",null,[n("div",Ze,f(u.value.videoCount),1),l[11]||(l[11]=n("div",{class:"text-gray-300"},"作品数量",-1))])]),n("div",ea,[e(F,{secondary:"",size:"large",type:"primary"},{default:t(()=>[e(D,{class:de(["mr-2 size-6",u.value.favorite?"color-#F8312F":"color-white"]),icon:"solar:heart-angle-bold"},null,8,["class"]),l[12]||(l[12]=n("span",null,"分享",-1))]),_:1}),e(F,{secondary:"",size:"large",type:"success",onClick:C},{default:t(()=>[e(D,{class:"mr-2 size-6",icon:"solar:user-id-bold"}),l[13]||(l[13]=n("span",null,"编辑",-1))]),_:1})])])])])]),n("section",aa,[e(o,{bordered:!1,class:"mx-auto rounded-xl bg-#333333 p-6 shadow-lg container"},{default:t(()=>[e(U,null,{default:t(()=>[(g(!0),N(B,null,A(u.value.tags.split("|").filter(r=>r.length>0),r=>(g(),H(R,{key:r,bordered:!1,type:"info"},{default:t(()=>[w(f(r),1)]),_:2},1024))),128))]),_:1}),e(U,{class:"text-gray-300 leading-relaxed"},{default:t(()=>[w(f(u.value.introduction==""?"暂无简介":u.value.introduction),1)]),_:1})]),_:1})]),n("section",ta,[n("div",la,[e(ee,{class:"pl-4 text-gray-2"},{default:t(()=>l[14]||(l[14]=[w("参演作品")])),_:1}),e(G,null,{default:t(()=>[(g(!0),N(B,null,A(a.value,r=>(g(),H(ae,{key:r.id,movie:r,"show-second-title":!1,class:"w-64",sort:_.value.sort},null,8,["movie","sort"]))),128))]),_:1}),e(O,{page:_.value.page,"onUpdate:page":l[1]||(l[1]=r=>_.value.page=r),"page-size":_.value.pageSize,"onUpdate:pageSize":l[2]||(l[2]=r=>_.value.pageSize=r),class:"ma-4",simple:"","page-count":z.value,"show-size-picker":"","page-sizes":c(q),onUpdatePage:i,onUpdatePageSize:i},null,8,["page","page-size","page-count","page-sizes"])])]),e(te,{show:s.value,"onUpdate:show":l[5]||(l[5]=r=>s.value=r),class:"h-128 w-1/2",preset:"card"},{header:t(()=>[e($,null,{default:t(()=>l[15]||(l[15]=[w("修改头像")])),_:1})]),footer:t(()=>[e(O,{page:_.value.page,"onUpdate:page":l[3]||(l[3]=r=>_.value.page=r),"page-size":_.value.pageSize,"onUpdate:pageSize":l[4]||(l[4]=r=>_.value.pageSize=r),simple:"","page-count":z.value,"show-size-picker":"","page-sizes":c(q),onUpdatePage:i,onUpdatePageSize:i},null,8,["page","page-size","page-count","page-sizes"])]),default:t(()=>[e(G,{class:"mt-lg w-auto"},{default:t(()=>[(g(!0),N(B,null,A(a.value,r=>(g(),H(o,{key:r.id,"content-style":"padding:0px !important",class:"mb-4 w-32",hoverable:"",onClick:sa=>I(r.poster)},{default:t(()=>[n("img",{src:c(k).projectSettings.serviceUrl+r.poster,class:"h-32 w-32 cursor-pointer rd-md object-cover object-top"},null,8,oa)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["show"]),e(oe,{show:x.value,"onUpdate:show":l[6]||(l[6]=r=>x.value=r),width:800,placement:"right","close-on-esc":""},{default:t(()=>[e(le,null,{default:t(()=>[e(Me,{info:u.value,onClose:p,onSetAvatar:d},null,8,["info"])]),_:1})]),_:1},8,["show"])])}}});export{Sa as default};
