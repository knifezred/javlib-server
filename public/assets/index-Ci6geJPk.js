import{_ as h}from"./movie-card.vue_vue_type_script_setup_true_lang-BdCVH0y5.js";import{d as x,j as B,u as C,r as u,k as N,o as _,c as m,w as n,f as g,g as P,t as v,h as d,b as w,l as M,F as U}from"./index-wh1bsACR.js";import{p as F}from"./library-CCOdEqI5.js";import{f as R}from"./movie-BQSiU9cG.js";import{_ as D}from"./Space-lk4KLM2X.js";import{_ as L}from"./Pagination-DYMfLol8.js";import{_ as T}from"./PageHeader-DD8QIc5Y.js";import{_ as V}from"./Flex-Dl2RNwgG.js";import"./p-BxNVXnzN.js";const K=x({name:"detail-page_video-list",__name:"index",setup(b){const a=B(),{routerBack:f}=C(),o=u(""),l=u([]),e=u({sort:"year",sortRule:"ASC",page:1,pageSize:20}),i=u(1),p=u(0);function c(){a.query.studio&&(e.value.studio=a.query.studio,o.value=e.value.studio),a.query.series&&(e.value.series=a.query.series,o.value=e.value.series),a.query.type&&a.query.key&&a.query.type==="tag"&&(e.value.tags=[a.query.key],o.value=e.value.tags[0]),a.query.actress&&(e.value.actress=a.query.actress,o.value=e.value.actress),R(e.value).then(s=>{s.data?(l.value=s.data.records,i.value=Math.ceil(s.data.total/e.value.pageSize),p.value=s.data.total):(l.value=[],i.value=1,p.value=0)})}return N(()=>{c()}),(s,r)=>{const y=h,z=D,k=L,S=T,q=V;return _(),m(q,{vertical:""},{default:n(()=>[g(S,{onBack:d(f)},{title:n(()=>[P(v(o.value)+"（"+v(p.value)+"）",1)]),footer:n(()=>[g(k,{page:e.value.page,"onUpdate:page":r[0]||(r[0]=t=>e.value.page=t),"page-size":e.value.pageSize,"onUpdate:pageSize":r[1]||(r[1]=t=>e.value.pageSize=t),"page-count":i.value,"show-size-picker":"",class:"ma-auto",simple:"","page-sizes":d(F),onUpdatePage:c,onUpdatePageSize:c},null,8,["page","page-size","page-count","page-sizes"])]),default:n(()=>[g(z,null,{default:n(()=>[(_(!0),w(U,null,M(l.value,t=>(_(),m(y,{key:t.id,movie:t,"show-second-title":!1,sort:e.value.sort},null,8,["movie","sort"]))),128))]),_:1})]),_:1},8,["onBack"])]),_:1})}}});export{K as default};
