import{_ as ze}from"./movie-card.vue_vue_type_script_setup_true_lang-CX2NC1kF.js";import{_ as $e}from"./actress-card.vue_vue_type_script_setup_true_lang-DKQx4rX-.js";import{d as ae,r as m,u as ne,T as se,j as ue,o as s,c as i,w as o,b as A,k as M,F as I,f as e,g as u,t as d,$ as f,B as re,_ as ie,U as ce,i as Ae,n as Te,V as Ue,e as V,h as $,p as F,q as oe,W as De,s as Fe,X as Me,l as Ie,m as Re,x as Be,y as Pe,Y as qe}from"./index-G0XXQiiJ.js";import{f as Ee,u as Ve}from"./category-DlmCSPJ1.js";import{_ as de}from"./Space-DdY25akT.js";import{b as je}from"./actress-C1DBjAjN.js";import{a as Le,u as j,d as Ge,f as Y}from"./movie-DpZnKH93.js";import{_ as He}from"./Ellipsis-BxtSdkeZ.js";import{_ as Ke,a as We}from"./Carousel-CZAwE5r4.js";import{a as Xe,_ as Ye}from"./FormItem-CBeD6pwd.js";import{_ as Je}from"./text-oUQLZaH4.js";import{_ as Oe}from"./p-CrdgHcto.js";import{_ as Qe}from"./Flex-Dlopc3Zl.js";import{_ as Ze,a as et}from"./Grid-DVzNts1A.js";import{a as tt,N as lt}from"./headers-CFrI0wwt.js";import{_ as ot}from"./Rate-C5zU23XB.js";import{_ as at}from"./DynamicTags-Bsr0ygzx.js";import"./library-D4JW-QQB.js";import"./get-slot-Bk_rJcZu.js";import"./prop-BjyUHhTu.js";const nt=ae({name:"CategoryCardGroup",__name:"category-card-group",props:{type:{},keys:{}},setup(J){const g=J,y=m([]);function R(r){r.favorite=!r.favorite,Ve(r).then(k=>{var v;k.data&&((v=window.$message)==null||v.success(r.favorite?f("common.addFavorite"):f("common.removeFavorite")))})}const T=ne();function t(r){T.routerPushByKey("detail-page_video-list",{query:{key:r.key,type:r.type}})}se(()=>g.keys,()=>{B()},{immediate:!0});function B(){g.keys.length>0&&Ee({type:g.type,keys:g.keys,page:1,pageSize:10,sort:"key",sortRule:"ASC"}).then(r=>{r.data?(y.value=[],g.keys.split("|").forEach(k=>{if(k.length>0){const v=r.data.records.find(U=>U.key===k);v?y.value.push(v):y.value.push({key:k,favorite:!1,type:"tag",value:1})}})):y.value=[]})}return ue(()=>{B()}),(r,k)=>{const v=re,U=ie,w=ce,x=de;return s(),i(x,null,{default:o(()=>[(s(!0),A(I,null,M(y.value,h=>(s(),A("div",{key:h.id,class:"relative w-auto rd-md text-center transition-transform duration-300 hover:transform-translate-y--2",hoverable:""},[e(v,{color:"#1f2937",class:"text-white hover:!bg-#374151 hover:!text-white",onClick:L=>t(h)},{default:o(()=>[u(d(h.key),1)]),_:2},1032,["onClick"]),e(v,{text:"",class:"ml-2 font-size-4",onClick:L=>R(h)},{default:o(()=>[e(w,null,{default:o(()=>[e(U,{class:"inline-flex",icon:h.favorite?"fluent-emoji-flat:heart-suit":"fluent-emoji-flat:grey-heart"},null,8,["icon"])]),_:2},1024)]),_:2},1032,["onClick"])]))),128))]),_:1})}}}),st=["src"],ut={class:"z-3 inline-block h-14 w-14 cursor-pointer rd-50% bg-#1f2937 pa-3 v-mid color-light hover:bg-primary"},rt=ae({name:"detail-page_video",__name:"index",setup(J){const g=Ae(),y=Te(),{routerBack:R,routerPushByKey:T}=ne(),t=m({createdTime:0,viewCount:0,favorite:!1,personalScore:void 0,uniqueid:"",num:"",title:"",originTitle:"",introduction:"",file:"",torrent:"",cover:"",poster:"",tags:"",genres:"",studio:"",country:"",series:"",actress:"",director:"",year:0,releaseTime:"",score:0,fileSize:0,favoriteTime:0}),B=m([{label:"编辑信息",key:"modify"},{label:"重新识别",key:"reScraping"},{label:`${f("common.delete")}源文件`,key:"delete"}]);function r(){T("detail-page_video-player",{query:{num:t.value.num}})}function k(){t.value.viewCount++,t.value.viewTime=Date.now(),j(t.value)}function v(){t.value.favorite=!t.value.favorite,t.value.favoriteTime=Date.now(),j(t.value).then(n=>{var l;n.data&&((l=window.$message)==null||l.success(t.value.favorite?f("common.addFavorite"):f("common.removeFavorite")))})}function U(){j(t.value).then(n=>{var l;n.data&&((l=window.$message)==null||l.success(f("common.saveSuccess")))})}const w=m(!1),x=m([]);function h(n){var l;n==="delete"&&Ge(t.value).then(()=>{R()}),n==="modify"&&(w.value=!0,x.value=t.value.tags.split("|").filter(c=>c.length>0)),n==="reScraping"&&((l=window.$message)==null||l.info("敬请期待"))}function L(){t.value.tags=`|${x.value.join("|")}|`,console.log(t.value.tags),j(t.value).then(()=>{var n;(n=window.$message)==null||n.success(f("common.saveSuccess")),w.value=!1})}function O(n,l){const c={};c[l]=n,T("detail-page_video-list",{query:c})}function pe(n){T("detail-page_video-list",{query:{key:n,type:"tag"}})}const G=m([]);function me(){Y({page:1,pageSize:7,sort:"id",sortRule:"RAND",folder:null}).then(n=>{n.data&&(G.value=n.data.records.filter(l=>l.num!==t.value.num))})}const P=m([]);function ve(){P.value=[],t.value.series.trim().length>0&&Y({series:t.value.series,page:1,pageSize:7,sort:"id",sortRule:"RAND",folder:null}).then(n=>{n.data&&(P.value=n.data.records.filter(l=>l.num!==t.value.num))})}const q=m(""),H=m([]);function _e(){Y({tags:[q.value],page:1,pageSize:7,sort:"id",sortRule:"RAND",folder:null}).then(n=>{n.data&&(H.value=n.data.records.filter(l=>l.num!==t.value.num))})}se(()=>y.query,()=>{Q()});const K=m(null),D=m([]);function Q(){Ue(()=>{K.value&&K.value.scrollIntoView({behavior:"smooth"})}),Le(y.query.num).then(n=>{n.data!==null&&(t.value=n.data,je({page:1,pageSize:30,name:n.data.actress,sort:"name",sortRule:"DESC"}).then(l=>{if(D.value=[],l.data!==null){const c=t.value.actress.split("|").filter(N=>N.length>0);for(const N of c){const _=l.data.records.find(C=>C.name===N);_&&D.value.push(_)}}}),me(),ve(),q.value=t.value.tags.split("|").filter(l=>l.length>0)[0],_e())})}return ue(()=>{Q()}),(n,l)=>{const c=ie,N=ce,_=Je,C=re,W=Oe,fe=Qe,Z=Fe,b=Ze,ge=tt,ee=ot,S=de,ye=He,ke=nt,he=Me,E=lt,te=$e,be=We,we=Ke,X=ze,xe=et,z=Ie,p=Ye,le=Re,Ne=at,Ce=Be,Se=Pe;return s(),i(S,{class:"pa-0",style:De("background: url("+$(g).projectSettings.serviceUrl+t.value.cover.replaceAll("\\","/")+");background-repeat: no-repeat;background-size: cover;")},{default:o(()=>[V("div",{ref_key:"targetElement",ref:K},[e(Z,{bordered:!1,class:"frosted-glass-container z-3 ma-0 rd-0"},{default:o(()=>[e(fe,{class:"mb-lg",vertical:""},{default:o(()=>[e(W,null,{default:o(()=>[e(C,{text:"",class:"z-3 v-sub font-size-lg color-white",onClick:$(R)},{default:o(()=>[e(N,null,{default:o(()=>[e(c,{icon:"solar:alt-arrow-left-line-duotone"})]),_:1}),e(_,{class:"inline-block pl-2 color-white hover:color-primary-400"},{default:o(()=>[u(d($(f)("route.detail-page_video")),1)]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}),e(xe,{class:"z-3 flex","x-gap":"12","y-gap":"0",cols:5},{default:o(()=>[e(b,null,{default:o(()=>[e(Z,{bordered:!1,class:"ml-6 h-102 w-72 rd-2xl","content-style":"padding: 0;",hoverable:"",onClick:r},{cover:o(()=>[V("img",{src:$(g).projectSettings.serviceUrl+t.value.poster,class:"cursor-pointer rd-xl transition-transform duration-300 hover:transform-scale-120"},null,8,st)]),_:1})]),_:1}),e(b,{span:3},{default:o(()=>[e(ge,{class:"my-1 mb-0 text-white"},{default:o(()=>[u(d(t.value.title),1)]),_:1}),e(W,{depth:"3",class:"mt-1"},{default:o(()=>[u(d(t.value.originTitle),1)]),_:1}),e(S,null,{default:o(()=>[e(ee,{value:t.value.personalScore,"onUpdate:value":[l[0]||(l[0]=a=>t.value.personalScore=a),U],"allow-half":"",count:5},null,8,["value"]),e(_,{class:"z-3 inline-block color-#F9A11E"},{default:o(()=>[u("( "+d(t.value.score)+" )",1)]),_:1}),e(_,{class:"z-3 mr-1 inline-block text-#A4A6A7"},{default:o(()=>[u(d(t.value.releaseTime)+" 上映",1)]),_:1}),t.value.studio.length>0?(s(),i(_,{key:0,class:"z-3 mx-1 inline-block text-#A4A6A7"},{default:o(()=>[l[15]||(l[15]=u(" 厂商： ")),e(_,{depth:"3",class:"z-3 cursor-pointer text-#A4A6A7 hover:color-primary",onClick:l[1]||(l[1]=a=>O(t.value.studio,"studio"))},{default:o(()=>[u(d(t.value.studio),1)]),_:1})]),_:1})):F("",!0),t.value.director.length>0?(s(),i(_,{key:1,class:"z-3 mx-1 inline-block text-#A4A6A7"},{default:o(()=>[u(" 导演："+d(t.value.director),1)]),_:1})):F("",!0)]),_:1}),e(ye,{class:"mt-lg indent-lg text-lg text-#9D9E9F","expand-trigger":"click","line-clamp":"4",tooltip:!1},{default:o(()=>[u(d(t.value.introduction),1)]),_:1}),e(W,null,{default:o(()=>[e(ke,{type:"tag",keys:t.value.tags},null,8,["keys"])]),_:1}),e(S,null,{default:o(()=>[e(C,{bordered:!1,class:"bg-primary pa-6 text-white hover:!bg-primary-400 hover:!text-white",onClick:r},{default:o(()=>[e(c,{class:"mr-2 inline-block size-8 color-white",icon:"solar:play-bold"}),l[16]||(l[16]=u(" 立即播放 "))]),_:1}),e(C,{tertiary:"",circle:"",type:"default",class:"ma-2",onClick:k},{icon:o(()=>[e(N,{class:"text-12"},{default:o(()=>[e(c,{class:oe(t.value.viewCount>0?"color-primary":"color-white"),icon:"solar:verified-check-bold"},null,8,["class"])]),_:1})]),_:1}),V("span",{class:"z-3 inline-block h-14 w-14 cursor-pointer rd-50% bg-#1f2937 pa-3 v-mid color-light hover:bg-#374151",onClick:v},[e(c,{class:oe(["ma-auto size-8",t.value.favorite?"color-#F8312F":"color-white"]),icon:"solar:heart-angle-bold"},null,8,["class"])]),e(he,{class:"v-mid",trigger:"hover",options:B.value,onSelect:h},{default:o(()=>[V("span",ut,[e(c,{class:"ma-auto size-8",icon:"tabler:dots"})])]),_:1},8,["options"])]),_:1})]),_:1}),e(b),e(b,{class:"z-3 ml-6 mt-xl",span:5},{default:o(()=>[e(E,{depth:"3",class:"mb-2 mt-xl text-light-9"},{default:o(()=>l[17]||(l[17]=[u("演员列表")])),_:1}),D.value.length===1?(s(),i(te,{key:0,"show-second-title":!1,actress:D.value[0],sort:"score",class:"mt-2"},null,8,["actress"])):(s(),i(we,{key:1,class:"z-3","slides-per-view":"auto","space-between":10,"show-dots":!1,draggable:""},{default:o(()=>[(s(!0),A(I,null,M(D.value,a=>(s(),i(be,{key:a.name,style:{width:"10rem"}},{default:o(()=>[e(te,{"show-second-title":!1,actress:a,sort:"score",class:"mt-2"},null,8,["actress"])]),_:2},1024))),128))]),_:1}))]),_:1}),G.value.length>0?(s(),i(b,{key:0,class:"z-3 ml-6 mt-xl",span:5},{default:o(()=>[e(E,{depth:"3",class:"mb-2 mt-xl text-light-9"},{default:o(()=>l[18]||(l[18]=[u("推荐影片")])),_:1}),e(S,null,{default:o(()=>[(s(!0),A(I,null,M(G.value,a=>(s(),i(X,{key:a.id,movie:a,class:"w-64",sort:"score"},null,8,["movie"]))),128))]),_:1})]),_:1})):F("",!0),P.value.length>0?(s(),i(b,{key:1,class:"z-3 ml-6 mt-xl",span:5},{default:o(()=>[e(E,{depth:"3",class:"mb-2 mt-xl cursor-pointer text-light-9",onClick:l[2]||(l[2]=a=>O(t.value.series,"series"))},{default:o(()=>[u(d("同系列 "+t.value.series+" 影片"),1)]),_:1}),e(S,null,{default:o(()=>[(s(!0),A(I,null,M(P.value,a=>(s(),i(X,{key:a.id,movie:a,class:"w-64",sort:"score"},null,8,["movie"]))),128))]),_:1})]),_:1})):F("",!0),H.value.length>0?(s(),i(b,{key:2,class:"z-3 ml-6 mt-xl",span:5},{default:o(()=>[e(E,{depth:"3",class:"mb-2 mt-xl cursor-pointer text-light-9",onClick:l[3]||(l[3]=a=>pe(q.value))},{default:o(()=>[u(" 更多 "+d(q.value)+" 影片 ",1)]),_:1}),e(S,null,{default:o(()=>[(s(!0),A(I,null,M(H.value,a=>(s(),i(X,{key:a.id,movie:a,class:"w-64",sort:"score"},null,8,["movie"]))),128))]),_:1})]),_:1})):F("",!0)]),_:1}),e(Se,{show:w.value,"onUpdate:show":l[14]||(l[14]=a=>w.value=a),width:600,placement:"right","close-on-esc":""},{default:o(()=>[e(Ce,{title:t.value.title},{default:o(()=>[e($(Xe),{"label-placement":"left","label-width":"100"},{default:o(()=>[e(p,{label:"标题"},{default:o(()=>[e(z,{value:t.value.title,"onUpdate:value":l[4]||(l[4]=a=>t.value.title=a)},null,8,["value"])]),_:1}),e(p,{label:"简介"},{default:o(()=>[e(z,{value:t.value.introduction,"onUpdate:value":l[5]||(l[5]=a=>t.value.introduction=a),type:"textarea"},null,8,["value"])]),_:1}),e(p,{label:"媒体评分"},{default:o(()=>[e(le,{value:t.value.score,"onUpdate:value":l[6]||(l[6]=a=>t.value.score=a)},null,8,["value"])]),_:1}),e(p,{label:"个人评分"},{default:o(()=>[e(ee,{value:t.value.personalScore,"onUpdate:value":l[7]||(l[7]=a=>t.value.personalScore=a),"allow-half":"",count:5},null,8,["value"])]),_:1}),e(p,{label:"标签"},{default:o(()=>[e(Ne,{value:x.value,"onUpdate:value":l[8]||(l[8]=a=>x.value=a)},null,8,["value"])]),_:1}),e(p,{label:"系列"},{default:o(()=>[e(z,{value:t.value.series,"onUpdate:value":l[9]||(l[9]=a=>t.value.series=a)},null,8,["value"])]),_:1}),e(p,{label:"厂商"},{default:o(()=>[e(z,{value:t.value.studio,"onUpdate:value":l[10]||(l[10]=a=>t.value.studio=a)},null,8,["value"])]),_:1}),e(p,{label:"导演"},{default:o(()=>[e(z,{value:t.value.director,"onUpdate:value":l[11]||(l[11]=a=>t.value.director=a)},null,8,["value"])]),_:1}),e(p,{label:"文件"},{default:o(()=>[e(z,{value:t.value.file,"onUpdate:value":l[12]||(l[12]=a=>t.value.file=a)},null,8,["value"])]),_:1}),e(p,{label:"年份"},{default:o(()=>[e(le,{value:t.value.year,"onUpdate:value":l[13]||(l[13]=a=>t.value.year=a)},null,8,["value"])]),_:1}),e(p,null,{default:o(()=>[e(C,{type:"primary",class:"ma-auto",onClick:L},{default:o(()=>[u(d($(f)("common.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]),_:1})],512)]),_:1},8,["style"])}}}),At=qe(rt,[["__scopeId","data-v-bf455fbd"]]);export{At as default};
