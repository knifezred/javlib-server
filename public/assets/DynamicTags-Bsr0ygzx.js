import{Z as j,a0 as L,a1 as U,a2 as K,a3 as W,A as w,d as E,D as N,a4 as $,a5 as H,r as v,E as P,a6 as J,a7 as M,a as S,I as Z,J as r,z as q,l as G,B as Q,P as X,a8 as Y,a9 as ee,V as te,aa as B}from"./index-G0XXQiiJ.js";import{s as ne,_ as ae}from"./Space-DdY25akT.js";import{s as se}from"./prop-BjyUHhTu.js";const ie=j({name:"DynamicTags",common:L,peers:{Input:U,Button:K,Tag:W,Space:ne},self(){return{inputWidth:"64px"}}}),le=w("dynamic-tags",[w("input",{minWidth:"var(--n-input-width)"})]),ue=Object.assign(Object.assign(Object.assign({},P.props),ee),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),ce=E({name:"DynamicTags",props:ue,setup(t){const{mergedClsPrefixRef:y,inlineThemeDisabled:d}=N(t),{localeRef:c}=$("DynamicTags"),m=H(t),{mergedDisabledRef:s}=m,p=v(""),g=v(!1),h=v(!0),C=v(null),b=P("DynamicTags","-dynamic-tags",le,ie,t,y),T=v(t.defaultValue),V=J(t,"value"),l=M(V,T),F=S(()=>c.value.add),O=S(()=>se(t.size)),z=S(()=>s.value||!!t.max&&l.value.length>=t.max);function I(e){const{onChange:n,"onUpdate:value":a,onUpdateValue:o}=t,{nTriggerFormInput:k,nTriggerFormChange:x}=m;n&&B(n,e),o&&B(o,e),a&&B(a,e),T.value=e,k(),x()}function R(e){const n=l.value.slice(0);n.splice(e,1),I(n)}function D(e){switch(e.key){case"Enter":u()}}function u(e){const n=e??p.value;if(n){const a=l.value.slice(0);a.push(t.onCreate(n)),I(a)}g.value=!1,h.value=!0,p.value=""}function A(){u()}function _(){g.value=!0,te(()=>{var e;(e=C.value)===null||e===void 0||e.focus(),h.value=!1})}const f=S(()=>{const{self:{inputWidth:e}}=b.value;return{"--n-input-width":e}}),i=d?Z("dynamic-tags",void 0,f,t):void 0;return{mergedClsPrefix:y,inputInstRef:C,localizedAdd:F,inputSize:O,inputValue:p,showInput:g,inputForceFocused:h,mergedValue:l,mergedDisabled:s,triggerDisabled:z,handleInputKeyDown:D,handleAddClick:_,handleInputBlur:A,handleCloseClick:R,handleInputConfirm:u,mergedTheme:b,cssVars:d?void 0:f,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){const{mergedTheme:t,cssVars:y,mergedClsPrefix:d,onRender:c,renderTag:m}=this;return c==null||c(),r(ae,{class:[`${d}-dynamic-tags`,this.themeClass],size:"small",style:y,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagClass:p,tagStyle:g,type:h,round:C,size:b,color:T,closable:V,mergedDisabled:l,showInput:F,inputValue:O,inputClass:z,inputStyle:I,inputSize:R,inputForceFocused:D,triggerDisabled:u,handleInputKeyDown:A,handleInputBlur:_,handleAddClick:f,handleCloseClick:i,handleInputConfirm:e,$slots:n}=this;return this.mergedValue.map((a,o)=>m?m(a,o):r(q,{key:o,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,class:p,style:g,type:h,round:C,size:b,color:T,closable:V,disabled:l,onClose:()=>{i(o)}},{default:()=>typeof a=="string"?a:a.label})).concat(F?n.input?n.input({submit:e,deactivate:_}):r(G,Object.assign({placeholder:"",size:R,style:I,class:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:O,onUpdateValue:a=>{this.inputValue=a},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeydown:A,onBlur:_,internalForceFocus:D})):n.trigger?n.trigger({activate:f,disabled:u}):r(Q,{dashed:!0,disabled:u,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:R,onClick:f},{icon:()=>r(X,{clsPrefix:d},{default:()=>r(Y,null)})}))}})}});export{ce as _};
