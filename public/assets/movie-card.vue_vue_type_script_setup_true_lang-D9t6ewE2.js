import{d as z,i as B,r as u,u as k,j as $,o as F,c as S,w as t,e as s,h as P,f as a,g as m,t as n,q as j,$ as v,_ as M,B as T,z as V,s as q}from"./index-CKOHag-y.js";import{u as D}from"./movie-COQLQBWO.js";import{c as H}from"./headers-Bl_Kd_Jk.js";import{_ as I}from"./p-BYwIBpBM.js";const K={class:"relative aspect-[2/3] overflow-hidden"},A=["src"],R={class:"absolute inset-0 flex flex-col justify-end rd-12px from-black/90 via-transparent to-transparent bg-gradient-to-t p-4 opacity-0 transition-opacity hover:opacity-200"},U={class:"mb-2 flex items-center justify-between"},E={class:"pos-absolute bottom--30px left-1/2 translate-x--50%"},Q=z({name:"MovieCard",__name:"movie-card",props:{movie:{},sort:{}},setup(d){const i=d,f=B(),_=u(""),l=u(!1);function y(){const o=i.movie;l.value=!l.value,o.favorite=l.value,o.favoriteTime=Date.now(),D(o).then(e=>{var r;e.data&&((r=window.$message)==null||r.success(o.favorite?v("common.addFavorite"):v("common.removeFavorite")))})}const p=k();function g(o){p.routerPushByKey("detail-page_video",{query:{num:o.num}})}function h(o){p.routerPushByKey("detail-page_video",{query:{num:o.num,autoplay:"auto"}})}return $(()=>{l.value=i.movie.favorite,_.value=i.movie[i.sort]}),(o,e)=>{const r=M,b=T,w=V,x=H,C=I,N=q;return F(),S(N,{bordered:!1,size:"small","content-style":"padding:0px;",class:"relative z-4 mx-2 mb-3xl rd-12px transition-transform duration-500 hover:transform-translate-y--3",hoverable:""},{cover:t(()=>[s("div",K,[s("img",{src:P(f).projectSettings.serviceUrl+o.movie.poster,class:"h-full w-full rd-12px"},null,8,A)])]),default:t(()=>[s("div",R,[s("div",U,[a(b,{text:"",class:"absolute left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2",onClick:e[0]||(e[0]=c=>h(o.movie))},{default:t(()=>[a(r,{class:"ma-auto size-18 color-white hover:color-primary",icon:"solar:play-circle-bold-duotone"})]),_:1}),a(w,{bordered:!1,color:{color:"rgb(194 65 12 / var(--tw-bg-opacity, 1))",textColor:"#fff"}},{default:t(()=>{var c;return[m(n((c=o.movie.personalScore)==null?void 0:c.toFixed(1))+" 分 ",1)]}),_:1}),s("span",{class:"z-3 inline-block h-10 w-10 cursor-pointer rd-50% bg-gray-600 pa-2 v-mid color-light hover:bg-primary",onClick:y},[a(r,{class:j(["ma-auto size-6",o.movie.favorite?"color-#F8312F":"color-white"]),icon:"solar:heart-angle-bold"},null,8,["class"])])]),a(x,{class:"line-clamp-2 my-0 cursor-pointer text-white",onClick:e[1]||(e[1]=c=>g(o.movie))},{default:t(()=>[m(n(o.movie.title),1)]),_:1}),a(C,{class:"text-sm text-gray-300"},{default:t(()=>[m(n(o.movie.year)+" • "+n(o.movie.actress.split("|")[1]),1)]),_:1})]),s("span",E,n(o.movie.num),1)]),_:1})}}});export{Q as _};
