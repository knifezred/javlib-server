import{d as z,i as B,r as u,u as k,j as F,o as S,c as $,w as t,e as r,h as P,f as s,g as m,t as c,q as j,$ as v,_ as M,B as T,z as V,s as q}from"./index-G0XXQiiJ.js";import{u as D}from"./movie-DpZnKH93.js";import{c as H}from"./headers-CFrI0wwt.js";import{_ as I}from"./p-CrdgHcto.js";const K={class:"relative aspect-[2/3] overflow-hidden"},A=["src"],R={class:"absolute inset-0 flex flex-col justify-end rd-12px from-black/90 via-transparent to-transparent bg-gradient-to-t p-4 opacity-0 transition-opacity hover:opacity-200"},U={class:"mb-2 flex items-center justify-between"},O=z({name:"MovieCard",__name:"movie-card",props:{movie:{},sort:{}},setup(d){const n=d,f=B(),_=u(""),i=u(!1);function y(){const e=n.movie;i.value=!i.value,e.favorite=i.value,e.favoriteTime=Date.now(),D(e).then(o=>{var a;o.data&&((a=window.$message)==null||a.success(e.favorite?v("common.addFavorite"):v("common.removeFavorite")))})}const p=k();function g(e){p.routerPushByKey("detail-page_video",{query:{num:e.num}})}function h(e){p.routerPushByKey("detail-page_video-player",{query:{num:e.num}})}return F(()=>{i.value=n.movie.favorite,_.value=n.movie[n.sort]}),(e,o)=>{const a=M,b=T,w=V,x=H,C=I,N=q;return S(),$(N,{bordered:!1,size:"small","content-style":"padding:0px;",class:"relative z-4 ma-2 rd-12px transition-transform duration-500 hover:transform-translate-y--3",hoverable:""},{cover:t(()=>[r("div",K,[r("img",{src:P(f).projectSettings.serviceUrl+e.movie.poster,class:"h-full w-full rd-12px"},null,8,A)])]),default:t(()=>[r("div",R,[r("div",U,[s(b,{text:"",class:"absolute left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2",onClick:o[0]||(o[0]=l=>h(e.movie))},{default:t(()=>[s(a,{class:"ma-auto size-24 color-white hover:color-primary",icon:"solar:play-circle-bold-duotone"})]),_:1}),s(w,{bordered:!1,color:{color:"rgb(194 65 12 / var(--tw-bg-opacity, 1))",textColor:"#fff"}},{default:t(()=>{var l;return[m(c((l=e.movie.personalScore)==null?void 0:l.toFixed(1))+" 分 ",1)]}),_:1}),r("span",{class:"z-3 inline-block h-10 w-10 cursor-pointer rd-50% bg-gray-600 pa-2 v-mid color-light hover:bg-primary",onClick:y},[s(a,{class:j(["ma-auto size-6",e.movie.favorite?"color-#F8312F":"color-white"]),icon:"solar:heart-angle-bold"},null,8,["class"])])]),s(x,{class:"line-clamp-2 my-0 cursor-pointer text-white",onClick:o[1]||(o[1]=l=>g(e.movie))},{default:t(()=>[m(c(e.movie.title),1)]),_:1}),s(C,{class:"text-sm text-gray-300"},{default:t(()=>[m(c(e.movie.year)+" • "+c(e.movie.actress.split("|")[1]),1)]),_:1})])]),_:1})}}});export{O as _};
