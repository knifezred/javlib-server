import{A as S,a0 as j,ba as x,d as D,aR as E,E as y,bD as L,r as u,a as w,bE as $,J as p,ae as B,aT as M}from"./index-CKOHag-y.js";function H(n,t){if(!n)return;const s=document.createElement("a");s.href=n,t!==void 0&&(s.download=t),document.body.appendChild(s),s.click(),document.body.removeChild(s)}const P=S("ellipsis",{overflow:"hidden"},[j("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),x("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),x("cursor-pointer",`
 cursor: pointer;
 `)]);function T(n){return`${n}-ellipsis--line-clamp`}function k(n,t){return`${n}-ellipsis--cursor-${t}`}const I=Object.assign(Object.assign({},y.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),N=D({name:"Ellipsis",inheritAttrs:!1,props:I,slots:Object,setup(n,{slots:t,attrs:s}){const a=E(),r=y("Ellipsis","-ellipsis",P,L,n,a),m=u(null),g=u(null),f=u(null),c=u(!1),v=w(()=>{const{lineClamp:e}=n,{value:i}=c;return e!==void 0?{textOverflow:"","-webkit-line-clamp":i?"":e}:{textOverflow:i?"":"ellipsis","-webkit-line-clamp":""}});function h(){let e=!1;const{value:i}=c;if(i)return!0;const{value:l}=m;if(l){const{lineClamp:o}=n;if(_(l),o!==void 0)e=l.scrollHeight<=l.offsetHeight;else{const{value:C}=g;C&&(e=C.getBoundingClientRect().width<=l.getBoundingClientRect().width)}O(l,e)}return e}const b=w(()=>n.expandTrigger==="click"?()=>{var e;const{value:i}=c;i&&((e=f.value)===null||e===void 0||e.setShow(!1)),c.value=!i}:void 0);$(()=>{var e;n.tooltip&&((e=f.value)===null||e===void 0||e.setShow(!1))});const R=()=>p("span",Object.assign({},M(s,{class:[`${a.value}-ellipsis`,n.lineClamp!==void 0?T(a.value):void 0,n.expandTrigger==="click"?k(a.value,"pointer"):void 0],style:v.value}),{ref:"triggerRef",onClick:b.value,onMouseenter:n.expandTrigger==="click"?h:void 0}),n.lineClamp?t:p("span",{ref:"triggerInnerRef"},t));function _(e){if(!e)return;const i=v.value,l=T(a.value);n.lineClamp!==void 0?d(e,l,"add"):d(e,l,"remove");for(const o in i)e.style[o]!==i[o]&&(e.style[o]=i[o])}function O(e,i){const l=k(a.value,"pointer");n.expandTrigger==="click"&&!i?d(e,l,"add"):d(e,l,"remove")}function d(e,i,l){l==="add"?e.classList.contains(i)||e.classList.add(i):e.classList.contains(i)&&e.classList.remove(i)}return{mergedTheme:r,triggerRef:m,triggerInnerRef:g,tooltipRef:f,handleClick:b,renderTrigger:R,getTooltipDisabled:h}},render(){var n;const{tooltip:t,renderTrigger:s,$slots:a}=this;if(t){const{mergedTheme:r}=this;return p(B,Object.assign({ref:"tooltipRef",placement:"top"},t,{getDisabled:this.getTooltipDisabled,theme:r.peers.Tooltip,themeOverrides:r.peerOverrides.Tooltip}),{trigger:s,default:(n=a.tooltip)!==null&&n!==void 0?n:a.default})}else return s()}});export{N as _,k as a,T as c,H as d,I as e,P as s};
