import{d as $,i as z,r as p,u as P,L as T,k as D,o as l,c as u,w as a,e as I,h as M,f as i,g as v,t as f,$ as _,_ as V,a4 as b,B as j,m as x}from"./index-DItnb3D9.js";import{u as F}from"./movie-BrVTha2p.js";import{_ as q}from"./p-B4gxHpB1.js";import{_ as K}from"./Rate-B08BRAue.js";const L=["src"],G=$({name:"MovieCard",__name:"movie-card",props:{movie:{},sort:{}},setup(d){const o=d,g=z(),s=p(""),n=p(!1);function h(){const e=o.movie;n.value=!n.value,e.favorite=n.value,e.favoriteTime=Date.now(),F(e).then(t=>{var r;t.data&&((r=window.$message)==null||r.success(e.favorite?_("common.addFavorite"):_("common.removeFavorite")))})}const m=P();function y(e){m.routerPushByKey("detail-page_video",{query:{num:e.num}})}function w(e){m.routerPushByKey("detail-page_video-player",{query:{num:e.num}})}return T(()=>o.sort,()=>{o.sort==="createdTime"?s.value=new Date(o.movie.createdTime).toLocaleDateString():o.sort==="title"?s.value=o.movie.year.toString():s.value=o.movie[o.sort]},{immediate:!0}),D(()=>{n.value=o.movie.favorite}),(e,t)=>{const r=V,N=b,S=j,c=q,k=K,B=x;return l(),u(B,{bordered:!1,size:"small",class:"relative z-4 w-48 rd-12px text-center",hoverable:""},{cover:a(()=>[I("img",{src:M(g).projectSettings.serviceUrl+e.movie.poster,class:"h-72 w-48 cursor-pointer transition-transform duration-300 hover:transform-scale-120",onClick:t[0]||(t[0]=C=>w(e.movie))},null,8,L)]),default:a(()=>[i(S,{text:"",class:"pointer-events-auto absolute-tr z-10 mr-4 mt-64 font-size-5",onClick:h},{default:a(()=>[i(N,null,{default:a(()=>[i(r,{class:"inline-flex",icon:n.value?"fluent-emoji-flat:heart-suit":"fluent-emoji-flat:grey-heart"},null,8,["icon"])]),_:1})]),_:1}),i(c,{class:"line-clamp-2 ma-0 cursor-pointer pt-1",onClick:t[1]||(t[1]=C=>y(e.movie))},{default:a(()=>[v(f(e.movie.title),1)]),_:1}),e.sort!="personalScore"?(l(),u(c,{key:0,depth:"3",class:"ma-0"},{default:a(()=>[v(f(s.value),1)]),_:1})):(l(),u(k,{key:1,value:e.movie.personalScore,"allow-half":"",readonly:"",size:"small",class:"mt-1"},null,8,["value"]))]),_:1})}}});export{G as _};
