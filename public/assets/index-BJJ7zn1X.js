import{_ as E}from"./movie-card.vue_vue_type_script_setup_true_lang-D9t6ewE2.js";import{d as M,r as i,i as V,j,o as d,b as c,e as a,f as o,w as n,g as r,t as L,F as k,k as C,B as $,bz as R,bN as F,c as H,am as O}from"./index-CKOHag-y.js";import{f as P}from"./movie-COQLQBWO.js";import{f as A}from"./category-BPzzbsxt.js";import{_ as G}from"./Space-DOnezgPU.js";import{b as I}from"./headers-Bl_Kd_Jk.js";import{_ as q}from"./Carousel-BFglNKqn.js";import"./p-BYwIBpBM.js";import"./get-slot-Bk_rJcZu.js";const J={class:"min-h-screen flex flex-col"},K={class:"flex-grow"},Q={class:"py-8"},W={class:"mx-auto px-4"},X={class:"py-12"},Y={class:"mx-auto container"},Z={class:"flex items-center justify-between"},ee={class:"grid grid-cols-2 gap-6 md:grid-cols-5 sm:grid-cols-3"},ae={class:"py-12"},le={class:"mx-auto container"},te={class:"mb-8 flex items-center justify-between"},oe={class:"grid grid-cols-2 gap-6 lg:grid-cols-5 md:grid-cols-4 sm:grid-cols-3"},se={class:"mt-12 text-center"},ne=M({name:"movie-poster-wall",__name:"index",setup(ue){const p=i(!1),S=V(),m=i(1),g=i(0),l=i({viewCount:-1,sort:"createdTime",sortRule:"DESC",pageSize:20,folder:null,page:1}),v=i([]);async function u(){S.setCacheSearchData(l.value),P(l.value).then(s=>{s.data!==null?(v.value=s.data.records,m.value=Math.ceil(s.data.total/l.value.pageSize),g.value=s.data.total):(v.value=[],m.value=1,g.value=0)})}function x(){l.value={years:null,keyword:"",type:null,tags:null,viewCount:-1,favorite:null,folder:null,sort:"createdTime",sortRule:"DESC",pageSize:20,page:1},u()}const _=i([]);function N(){A({page:1,pageSize:999,type:"tag",sort:"value",sortRule:"DESC"}).then(s=>{s.data&&s.data.records.forEach(e=>{_.value.push({label:e.key,value:e.value})})})}const B=[{label:"年份",value:"year"},{label:"番号",value:"num"},{label:"综合评分",value:"score"},{label:"个人评分",value:"personalScore"},{label:"添加时间",value:"createdTime"},{label:"上映时间",value:"releaseTime"},{label:"播放次数",value:"viewCount"}],D=()=>{p.value=!0,m.value++,u().then(()=>{p.value=!1})};return j(()=>{N(),u()}),(s,e)=>{const b=$,f=R,y=F,T=G,h=I,w=E,U=q;return d(),c("div",J,[a("main",K,[e[13]||(e[13]=a("section",{class:"hero-gradient relative overflow-hidden py-20 md:py-32"},[a("div",{class:"absolute inset-0 opacity-20"},[a("div",{class:"absolute inset-0 bg-[url('https://picsum.photos/id/1071/1920/1080')] bg-cover bg-center"})]),a("div",{class:"absolute bottom-0 left-0 right-0 h-16 from-gray-900 to-transparent bg-gradient-to-t"})],-1)),a("section",Q,[a("div",W,[o(T,{wrap:"",justify:"center"},{default:n(()=>[o(b,{type:"primary",onClick:x},{default:n(()=>[r(L(s.$t("common.reset")),1)]),_:1}),o(f,{value:l.value.tags,"onUpdate:value":[e[0]||(e[0]=t=>l.value.tags=t),u],options:_.value,placeholder:s.$t("page.library.tags"),filterable:"",clearable:"",class:"w-40"},null,8,["value","options","placeholder"]),o(f,{value:l.value.years,"onUpdate:value":[e[1]||(e[1]=t=>l.value.years=t),u],placeholder:s.$t("page.library.yearGroup"),class:"w-35",clearable:"",multiple:"","max-tag-count":"responsive",options:[{label:"2025",value:"2025"},{label:"2024",value:"2024"},{label:"2023",value:"2023"},{label:"2022",value:"2022"},{label:"2021",value:"2021"},{label:"2020",value:"2020"},{label:"2019 - 2015",value:"2019-2015"},{label:"2014 - 2010",value:"2015-2010"},{label:"2009 - 2000",value:"2009-2000"},{label:"90年代",value:"1999-1990"},{label:"80年代",value:"1989-1980"},{label:"更早",value:"1979-1900"}]},null,8,["value","placeholder"]),o(y,{value:l.value.viewCount,"onUpdate:value":e[2]||(e[2]=t=>l.value.viewCount=t),"checked-value":0,"unchecked-value":-1,onUpdateValue:u},{checked:n(()=>e[5]||(e[5]=[r("未播放")])),unchecked:n(()=>e[6]||(e[6]=[r("全部")])),_:1},8,["value"]),o(y,{value:l.value.favorite,"onUpdate:value":e[3]||(e[3]=t=>l.value.favorite=t),"checked-value":!0,"unchecked-value":void 0,onUpdateValue:u},{checked:n(()=>e[7]||(e[7]=[r("已收藏")])),unchecked:n(()=>e[8]||(e[8]=[r("所有")])),_:1},8,["value"])]),_:1})])]),a("section",X,[a("div",Y,[a("div",Z,[o(h,{class:"font-bold"},{default:n(()=>e[9]||(e[9]=[r("最近观看")])),_:1})]),o(U,{"show-arrow":!0,"show-indicator":!1,loop:!0,class:"relative"},{content:n(()=>[a("div",ee,[(d(!0),c(k,null,C(v.value,t=>(d(),H(w,{key:t.id,class:"poster-shadow poster-hover w-72",movie:t,sort:l.value.sort},null,8,["movie","sort"]))),128))])]),_:1})])]),a("section",ae,[a("div",le,[a("div",te,[o(h,{class:"font-bold"},{default:n(()=>e[10]||(e[10]=[r("经典电影")])),_:1}),o(f,{value:l.value.sort,"onUpdate:value":[e[4]||(e[4]=t=>l.value.sort=t),u],options:B,class:"w-40",placeholder:"排序方式"},null,8,["value"])]),a("div",oe,[(d(!0),c(k,null,C(v.value,(t,z)=>(d(),c("div",{key:z,class:"poster-card"},[o(w,{class:"poster-shadow w-72",movie:t,sort:l.value.sort},null,8,["movie","sort"])]))),128))]),a("div",se,[o(b,{type:"default",loading:p.value,onClick:D},{icon:n(()=>e[11]||(e[11]=[a("i",{class:"solar:restart-bold"},null,-1)])),default:n(()=>[e[12]||(e[12]=r(" 加载更多 "))]),_:1},8,["loading"])])])])])])}}}),_e=O(ne,[["__scopeId","data-v-ba129536"]]);export{_e as default};
