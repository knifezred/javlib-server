import{_ as Ve}from"./movie-card.vue_vue_type_script_setup_true_lang-BbBdxZNE.js";import{_ as Be}from"./actress-card.vue_vue_type_script_setup_true_lang-C7FfEEdG.js";import{P as Ue,Q as Pe,R as Me,T as Oe,U as je,v as pe,d as se,y as Le,V as Ee,W as qe,r as m,z as fe,X as Ge,Y as He,a as te,D as Ke,E,p as We,Z as _e,B as re,N as Qe,a0 as Xe,a1 as Ye,a2 as ge,a3 as ne,u as ye,L as he,k as be,o as i,c as v,w as l,b as H,l as X,F as Y,f as a,g as c,t as y,$ as R,_ as ke,a4 as Ce,i as Ze,j as Je,e as q,h as G,O as Q,M as ve,a5 as et,m as tt,a6 as at,a7 as lt,a8 as nt,a9 as ot,aa as st}from"./index-DItnb3D9.js";import{f as rt,u as ut}from"./category-DX66RkgZ.js";import{s as it,_ as ue}from"./Space-D7PNJy4T.js";import{_ as we}from"./text-Caewz_j-.js";import{a as ct}from"./actress-CJFnrttt.js";import{a as dt,u as ae,d as mt,f as oe}from"./movie-BrVTha2p.js";import{_ as pt,a as vt}from"./FormItem-Dtq-PGbP.js";import{_ as ft}from"./Ellipsis-DjtMOogK.js";import{a as _t,c as gt}from"./headers-CowQBov4.js";import{_ as yt,a as ht}from"./Carousel-C0I41s4p.js";import{s as bt}from"./prop-BjyUHhTu.js";import{_ as kt}from"./p-B4gxHpB1.js";import{_ as Ct}from"./Flex-Cs8l2fCs.js";import{_ as wt,a as xt}from"./Grid-HtSArZJZ.js";import{_ as St}from"./Rate-B08BRAue.js";import"./library-D4JW-QQB.js";import"./get-slot-Bk_rJcZu.js";const zt=Ue({name:"DynamicTags",common:Pe,peers:{Input:Me,Button:Oe,Tag:je,Space:it},self(){return{inputWidth:"64px"}}}),Nt=pe("dynamic-tags",[pe("input",{minWidth:"var(--n-input-width)"})]),Tt=Object.assign(Object.assign(Object.assign({},fe.props),Ye),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:u=>u},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),At=se({name:"DynamicTags",props:Tt,setup(u){const{mergedClsPrefixRef:f,inlineThemeDisabled:_}=Le(u),{localeRef:x}=Ee("DynamicTags"),h=qe(u),{mergedDisabledRef:e}=h,S=m(""),r=m(!1),z=m(!0),b=m(null),I=fe("DynamicTags","-dynamic-tags",Nt,zt,u,f),k=m(u.defaultValue),N=Ge(u,"value"),T=He(N,k),C=te(()=>x.value.add),F=te(()=>bt(u.size)),K=te(()=>e.value||!!u.max&&T.value.length>=u.max);function D(s){const{onChange:d,"onUpdate:value":n,onUpdateValue:t}=u,{nTriggerFormInput:p,nTriggerFormChange:M}=h;d&&ne(d,s),t&&ne(t,s),n&&ne(n,s),k.value=s,p(),M()}function j(s){const d=T.value.slice(0);d.splice(s,1),D(d)}function $(s){switch(s.key){case"Enter":V()}}function V(s){const d=s??S.value;if(d){const n=T.value.slice(0);n.push(u.onCreate(d)),D(n)}r.value=!1,z.value=!0,S.value=""}function B(){V()}function U(){r.value=!0,ge(()=>{var s;(s=b.value)===null||s===void 0||s.focus(),z.value=!1})}const P=te(()=>{const{self:{inputWidth:s}}=I.value;return{"--n-input-width":s}}),g=_?Ke("dynamic-tags",void 0,P,u):void 0;return{mergedClsPrefix:f,inputInstRef:b,localizedAdd:C,inputSize:F,inputValue:S,showInput:r,inputForceFocused:z,mergedValue:T,mergedDisabled:e,triggerDisabled:K,handleInputKeyDown:$,handleAddClick:U,handleInputBlur:B,handleCloseClick:j,handleInputConfirm:V,mergedTheme:I,cssVars:_?void 0:P,themeClass:g==null?void 0:g.themeClass,onRender:g==null?void 0:g.onRender}},render(){const{mergedTheme:u,cssVars:f,mergedClsPrefix:_,onRender:x,renderTag:h}=this;return x==null||x(),E(ue,{class:[`${_}-dynamic-tags`,this.themeClass],size:"small",style:f,theme:u.peers.Space,themeOverrides:u.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:e,tagClass:S,tagStyle:r,type:z,round:b,size:I,color:k,closable:N,mergedDisabled:T,showInput:C,inputValue:F,inputClass:K,inputStyle:D,inputSize:j,inputForceFocused:$,triggerDisabled:V,handleInputKeyDown:B,handleInputBlur:U,handleAddClick:P,handleCloseClick:g,handleInputConfirm:s,$slots:d}=this;return this.mergedValue.map((n,t)=>h?h(n,t):E(We,{key:t,theme:e.peers.Tag,themeOverrides:e.peerOverrides.Tag,class:S,style:r,type:z,round:b,size:I,color:k,closable:N,disabled:T,onClose:()=>{g(t)}},{default:()=>typeof n=="string"?n:n.label})).concat(C?d.input?d.input({submit:s,deactivate:U}):E(_e,Object.assign({placeholder:"",size:j,style:D,class:K,autosize:!0},this.inputProps,{ref:"inputInstRef",value:F,onUpdateValue:n=>{this.inputValue=n},theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,onKeydown:B,onBlur:U,internalForceFocus:$})):d.trigger?d.trigger({activate:P,disabled:V}):E(re,{dashed:!0,disabled:V,theme:e.peers.Button,themeOverrides:e.peerOverrides.Button,size:j,onClick:P},{icon:()=>E(Qe,{clsPrefix:_},{default:()=>E(Xe,null)})}))}})}}),Rt=se({name:"CategoryCardGroup",__name:"category-card-group",props:{type:{},keys:{}},setup(u){const f=u,_=m([]);function x(r){r.favorite=!r.favorite,ut(r).then(z=>{var b;z.data&&((b=window.$message)==null||b.success(r.favorite?R("common.addFavorite"):R("common.removeFavorite")))})}const h=ye();function e(r){h.routerPushByKey("detail-page_video-list",{query:{key:r.key,type:r.type}})}he(()=>f.keys,()=>{S()},{immediate:!0});function S(){f.keys.length>0&&rt({type:f.type,keys:f.keys,page:1,pageSize:10,sort:"key",sortRule:"ASC"}).then(r=>{r.data?_.value=r.data.records:_.value=[]})}return be(()=>{S()}),(r,z)=>{const b=we,I=ke,k=Ce,N=re,T=ue;return i(),v(T,null,{default:l(()=>[(i(!0),H(Y,null,X(_.value,C=>(i(),H("div",{key:C.id,class:"relative w-auto rd-md text-center transition-transform duration-300 hover:transform-translate-y--2",hoverable:""},[a(b,{depth:3,class:"cursor-pointer border-b-2 border-b-primary border-b-style-solid color-warning-200",onClick:F=>e(C)},{default:l(()=>[c(y(C.key),1)]),_:2},1032,["onClick"]),a(N,{text:"",class:"ml-2 font-size-4",onClick:F=>x(C)},{default:l(()=>[a(k,null,{default:l(()=>[a(I,{class:"inline-flex",icon:C.favorite?"fluent-emoji-flat:heart-suit":"fluent-emoji-flat:grey-heart"},null,8,["icon"])]),_:2},1024)]),_:2},1032,["onClick"])]))),128))]),_:1})}}}),It=["src"],Ft={class:"z-3 inline-block h-14 w-14 cursor-pointer rd-50% bg-#404245 pa-3 v-mid color-light hover:bg-primary"},Dt=se({name:"detail-page_video",__name:"index",setup(u){const f=Ze(),_=Je(),{routerBack:x,routerPushByKey:h}=ye(),e=m({createdTime:0,viewCount:0,favorite:!1,personalScore:void 0,uniqueid:"",num:"",title:"",originTitle:"",introduction:"",file:"",torrent:"",cover:"",poster:"",tags:"",genres:"",studio:"",country:"",series:"",actress:"",director:"",year:0,releaseTime:"",score:0,fileSize:0,favoriteTime:0}),S=m([{label:"编辑信息",key:"modify"},{label:"重新识别",key:"reScraping"},{label:`${R("common.delete")}源文件`,key:"delete"}]);function r(){h("detail-page_video-player",{query:{num:e.value.num}})}function z(){e.value.viewCount++,e.value.viewTime=Date.now(),ae(e.value)}function b(){e.value.favorite=!e.value.favorite,e.value.favoriteTime=Date.now(),ae(e.value).then(n=>{var t;n.data&&((t=window.$message)==null||t.success(e.value.favorite?R("common.addFavorite"):R("common.removeFavorite")))})}function I(){ae(e.value).then(n=>{var t;n.data&&((t=window.$message)==null||t.success(R("common.saveSuccess")))})}const k=m(!1),N=m([]);function T(n){var t;n==="delete"&&mt(e.value).then(()=>{x()}),n==="modify"&&(k.value=!0,N.value=e.value.tags.split("|").filter(p=>p.length>0)),n==="reScraping"&&((t=window.$message)==null||t.info("敬请期待"))}function C(){e.value.tags=`|${N.value.join("|")}|`,ae(e.value).then(()=>{var n;(n=window.$message)==null||n.success(R("common.saveSuccess")),k.value=!1})}function F(n,t){const p={};p[t]=n,h("detail-page_video-list",{query:p})}function K(n){h("detail-page_video-list",{query:{key:n,type:"tag"}})}const D=m([]);function j(){oe({page:1,pageSize:7,sort:"id",sortRule:"RAND",folder:null}).then(n=>{n.data&&(D.value=n.data.records.filter(t=>t.num!==e.value.num))})}const $=m([]);function V(){$.value=[],e.value.series.trim().length>0&&oe({series:e.value.series,page:1,pageSize:7,sort:"id",sortRule:"RAND",folder:null}).then(n=>{n.data&&($.value=n.data.records.filter(t=>t.num!==e.value.num))})}const B=m(""),U=m([]);function P(){oe({tags:[B.value],page:1,pageSize:7,sort:"id",sortRule:"RAND",folder:null}).then(n=>{n.data&&(U.value=n.data.records.filter(t=>t.num!==e.value.num))})}he(()=>_.query,()=>{d()});const g=m(null),s=m([]);function d(){ge(()=>{g.value&&g.value.scrollIntoView({behavior:"smooth"})}),dt(_.query.num).then(n=>{n.data!==null&&(e.value=n.data,ct({page:1,pageSize:30,name:n.data.actress,sort:"name",sortRule:"DESC"}).then(t=>{if(s.value=[],t.data!==null){const p=e.value.actress.split("|").filter(M=>M.length>0);for(const M of p){const A=t.data.records.find(Z=>Z.name===M);A&&s.value.push(A)}}}),j(),V(),B.value=e.value.tags.split("|").filter(t=>t.length>0)[0],P())})}return be(()=>{d()}),(n,t)=>{const p=ke,M=Ce,A=we,Z=re,J=kt,xe=Ct,ie=tt,O=wt,Se=_t,ze=Rt,Ne=ft,Te=at,ce=St,W=ue,ee=gt,de=Be,Ae=ht,Re=yt,le=Ve,Ie=xt,L=_e,w=vt,me=lt,Fe=At,De=nt,$e=ot;return i(),v(W,{class:"pa-0",style:et("background: url("+G(f).projectSettings.serviceUrl+e.value.cover.replaceAll("\\","/")+");background-repeat: no-repeat;background-size: cover;")},{default:l(()=>[q("div",{ref_key:"targetElement",ref:g},[a(ie,{bordered:!1,class:"frosted-glass-container z-3 ma-0 rd-0"},{default:l(()=>[a(xe,{class:"mb-lg",vertical:""},{default:l(()=>[a(J,null,{default:l(()=>[a(Z,{text:"",class:"z-3 v-sub font-size-lg color-white",onClick:G(x)},{default:l(()=>[a(M,null,{default:l(()=>[a(p,{icon:"solar:alt-arrow-left-line-duotone"})]),_:1}),a(A,{class:"inline-block pl-2 color-white hover:color-primary-400"},{default:l(()=>[c(y(G(R)("route.detail-page_video")),1)]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}),a(Ie,{class:"z-3 flex","x-gap":"12","y-gap":"0",cols:5},{default:l(()=>[a(O,null,{default:l(()=>[a(ie,{bordered:!1,class:"ml-6 h-102 w-72 rd-2xl","content-style":"padding: 0;",hoverable:"",onClick:r},{cover:l(()=>[q("img",{src:G(f).projectSettings.serviceUrl+e.value.poster,class:"cursor-pointer rd-xl transition-transform duration-300 hover:transform-scale-120"},null,8,It)]),_:1})]),_:1}),a(O,{span:3},{default:l(()=>[a(Se,{class:"my-1 text-white"},{default:l(()=>[c(y(e.value.title)+" ",1),a(A,{class:"z-3 inline-block w-18 text-xl color-#F9A11E"},{default:l(()=>[c(y(e.value.score)+"分",1)]),_:1})]),_:1}),a(J,{class:"my-0"},{default:l(()=>[a(A,{class:"z-3 mr-1 inline-block text-lg text-#A4A6A7"},{default:l(()=>[c(y(e.value.releaseTime),1)]),_:1}),e.value.studio.length>0?(i(),v(A,{key:0,class:"z-3 mx-1 inline-block text-lg text-#A4A6A7"},{default:l(()=>[t[15]||(t[15]=c(" | 厂商： ")),a(A,{depth:"3",class:"z-3 cursor-pointer text-#A4A6A7 hover:color-primary",onClick:t[0]||(t[0]=o=>F(e.value.studio,"studio"))},{default:l(()=>[c(y(e.value.studio),1)]),_:1})]),_:1})):Q("",!0),e.value.director.length>0?(i(),v(A,{key:1,class:"z-3 mx-1 inline-block text-lg text-#A4A6A7"},{default:l(()=>[c(" | 导演："+y(e.value.director),1)]),_:1})):Q("",!0),a(A,{class:"z-3 mx-1 inline-block text-lg text-#A4A6A7"},{default:l(()=>[c(" | 大小： "+y((e.value.fileSize/1e3/1e3/1e3).toFixed(2)+" GB"),1)]),_:1})]),_:1}),a(J,{class:"my-sm"},{default:l(()=>[a(ze,{type:"tag",keys:e.value.tags},null,8,["keys"])]),_:1}),a(J,{class:"my-xs text-lg text-light"},{default:l(()=>t[16]||(t[16]=[c("剧情简介")])),_:1}),a(Ne,{class:"indent-lg text-lg text-#9D9E9F","expand-trigger":"click","line-clamp":"4",tooltip:!1},{default:l(()=>[c(y(e.value.introduction),1)]),_:1}),a(W,{class:"mt-2"},{default:l(()=>[q("span",{class:"z-3 ml-0 inline-block h-14 w-48 cursor-pointer rd-12 bg-primary-600 pa-3 text-center color-light hover:bg-primary",onClick:r},[a(p,{class:"mr-2 inline-block size-8 color-white",icon:"solar:play-bold"}),t[17]||(t[17]=c(" 立即播放 "))]),q("span",{class:"z-3 inline-block h-14 w-14 cursor-pointer rd-50% bg-#404245 pa-3 v-mid color-light hover:bg-primary-300",onClick:z},[a(p,{class:ve(["ma-auto size-8",e.value.viewCount>0?"color-primary":"color-white"]),icon:"solar:verified-check-bold"},null,8,["class"])]),q("span",{class:"z-3 inline-block h-14 w-14 cursor-pointer rd-50% bg-#404245 pa-3 v-mid color-light hover:bg-primary",onClick:b},[a(p,{class:ve(["ma-auto size-8",e.value.favorite?"color-#F8312F":"color-white"]),icon:"solar:heart-angle-bold"},null,8,["class"])]),a(Te,{class:"v-mid",trigger:"hover",options:S.value,onSelect:T},{default:l(()=>[q("span",Ft,[a(p,{class:"ma-auto size-8",icon:"tabler:dots"})])]),_:1},8,["options"]),a(ce,{value:e.value.personalScore,"onUpdate:value":[t[1]||(t[1]=o=>e.value.personalScore=o),I],"allow-half":"",class:"h-14 pa-4",count:5},null,8,["value"])]),_:1})]),_:1}),a(O),a(O,{class:"z-3 ml-6 mt-xl",span:5},{default:l(()=>[a(ee,{depth:"3",class:"mb-2 mt-xl text-light-9"},{default:l(()=>t[18]||(t[18]=[c("演员列表")])),_:1}),s.value.length===1?(i(),v(de,{key:0,"show-second-title":!1,actress:s.value[0],sort:"score",class:"mt-2"},null,8,["actress"])):(i(),v(Re,{key:1,class:"z-3","slides-per-view":"auto","space-between":10,"show-dots":!1,draggable:""},{default:l(()=>[(i(!0),H(Y,null,X(s.value,o=>(i(),v(Ae,{key:o.name,style:{width:"10rem"}},{default:l(()=>[a(de,{"show-second-title":!1,actress:o,sort:"score",class:"mt-2"},null,8,["actress"])]),_:2},1024))),128))]),_:1}))]),_:1}),D.value.length>0?(i(),v(O,{key:0,class:"z-3 ml-6 mt-xl",span:5},{default:l(()=>[a(ee,{depth:"3",class:"mb-2 mt-xl text-light-9"},{default:l(()=>t[19]||(t[19]=[c("推荐影片")])),_:1}),a(W,null,{default:l(()=>[(i(!0),H(Y,null,X(D.value,o=>(i(),v(le,{key:o.id,movie:o,sort:"score"},null,8,["movie"]))),128))]),_:1})]),_:1})):Q("",!0),$.value.length>0?(i(),v(O,{key:1,class:"z-3 ml-6 mt-xl",span:5},{default:l(()=>[a(ee,{depth:"3",class:"mb-2 mt-xl cursor-pointer text-light-9",onClick:t[2]||(t[2]=o=>F(e.value.series,"series"))},{default:l(()=>[c(y("同系列 "+e.value.series+" 影片"),1)]),_:1}),a(W,null,{default:l(()=>[(i(!0),H(Y,null,X($.value,o=>(i(),v(le,{key:o.id,movie:o,sort:"score"},null,8,["movie"]))),128))]),_:1})]),_:1})):Q("",!0),U.value.length>0?(i(),v(O,{key:2,class:"z-3 ml-6 mt-xl",span:5},{default:l(()=>[a(ee,{depth:"3",class:"mb-2 mt-xl cursor-pointer text-light-9",onClick:t[3]||(t[3]=o=>K(B.value))},{default:l(()=>[c(" 更多 "+y(B.value)+" 影片 ",1)]),_:1}),a(W,null,{default:l(()=>[(i(!0),H(Y,null,X(U.value,o=>(i(),v(le,{key:o.id,movie:o,sort:"score"},null,8,["movie"]))),128))]),_:1})]),_:1})):Q("",!0)]),_:1}),a($e,{show:k.value,"onUpdate:show":t[14]||(t[14]=o=>k.value=o),width:600,placement:"right","close-on-esc":""},{default:l(()=>[a(De,{title:e.value.title},{default:l(()=>[a(G(pt),{"label-placement":"left","label-width":"100"},{default:l(()=>[a(w,{label:"标题"},{default:l(()=>[a(L,{value:e.value.title,"onUpdate:value":t[4]||(t[4]=o=>e.value.title=o)},null,8,["value"])]),_:1}),a(w,{label:"简介"},{default:l(()=>[a(L,{value:e.value.introduction,"onUpdate:value":t[5]||(t[5]=o=>e.value.introduction=o),type:"textarea"},null,8,["value"])]),_:1}),a(w,{label:"媒体评分"},{default:l(()=>[a(me,{value:e.value.score,"onUpdate:value":t[6]||(t[6]=o=>e.value.score=o)},null,8,["value"])]),_:1}),a(w,{label:"个人评分"},{default:l(()=>[a(ce,{value:e.value.personalScore,"onUpdate:value":t[7]||(t[7]=o=>e.value.personalScore=o),"allow-half":"",count:5},null,8,["value"])]),_:1}),a(w,{label:"标签"},{default:l(()=>[a(Fe,{value:N.value,"onUpdate:value":t[8]||(t[8]=o=>N.value=o)},null,8,["value"])]),_:1}),a(w,{label:"系列"},{default:l(()=>[a(L,{value:e.value.series,"onUpdate:value":t[9]||(t[9]=o=>e.value.series=o)},null,8,["value"])]),_:1}),a(w,{label:"厂商"},{default:l(()=>[a(L,{value:e.value.studio,"onUpdate:value":t[10]||(t[10]=o=>e.value.studio=o)},null,8,["value"])]),_:1}),a(w,{label:"导演"},{default:l(()=>[a(L,{value:e.value.director,"onUpdate:value":t[11]||(t[11]=o=>e.value.director=o)},null,8,["value"])]),_:1}),a(w,{label:"文件"},{default:l(()=>[a(L,{value:e.value.file,"onUpdate:value":t[12]||(t[12]=o=>e.value.file=o)},null,8,["value"])]),_:1}),a(w,{label:"年份"},{default:l(()=>[a(me,{value:e.value.year,"onUpdate:value":t[13]||(t[13]=o=>e.value.year=o)},null,8,["value"])]),_:1}),a(w,null,{default:l(()=>[a(Z,{type:"primary",class:"ma-auto",onClick:C},{default:l(()=>[c(y(G(R)("common.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])]),_:1})],512)]),_:1},8,["style"])}}}),Jt=st(Dt,[["__scopeId","data-v-1cc0cd69"]]);export{Jt as default};
