import{d as q,i as H,r as d,k as K,at as $,o as r,c as p,w as t,f as a,h as z,g as S,t as T,O as f,b as U,l as D,F,Z,bE as J,br as Q,bF as W,B as X,_ as Y,a4 as ee,b1 as ae,bG as te,bH as le,m as oe}from"./index-DItnb3D9.js";import{_ as ne}from"./actress-card.vue_vue_type_script_setup_true_lang-C7FfEEdG.js";import{_ as I}from"./favorite-card-group.vue_vue_type_script_setup_true_lang-CBMwQKzb.js";import{_ as se}from"./movie-card.vue_vue_type_script_setup_true_lang-BbBdxZNE.js";import{s as ue,p as ie}from"./library-D4JW-QQB.js";import{g as re,a as ve}from"./actress-CJFnrttt.js";import{g as pe,f as me}from"./movie-BrVTha2p.js";import{a as de,_ as _e}from"./FormItem-Dtq-PGbP.js";import{_ as ce}from"./Space-D7PNJy4T.js";import{_ as fe,a as ge}from"./CollapseItem-CYvgcpXT.js";import{_ as be}from"./Pagination-DtpHMPZw.js";import{_ as ye}from"./Flex-Cs8l2fCs.js";import"./p-B4gxHpB1.js";import"./text-Caewz_j-.js";import"./Rate-B08BRAue.js";import"./get-slot-Bk_rJcZu.js";import"./prop-BjyUHhTu.js";const xe=q({name:"favorites",__name:"index",setup(ke){const w=H(),n=d({movie:0,actress:0,studio:0,series:0}),u=d({movie:[],actress:[],studio:[],series:[]}),i=d("movie"),h=d(!0),o=d({page:1,pageSize:20,keyword:"",name:"",viewCount:-1,sort:"favoriteTime",sortRule:"DESC",folder:null,favorite:!0}),P=[{label:"收藏时间",value:"favoriteTime"},{label:"更新时间",value:"updatedTime"},{label:"年份",value:"year"},{label:"番号",value:"num"},{label:"综合评分",value:"score"},{label:"个人评分",value:"personalScore"},{label:"添加时间",value:"createdTime"},{label:"上映时间",value:"releaseTime"},{label:"播放次数",value:"viewCount"}],_=d(1);function v(s){switch(i.value=s,w.setCacheSearchData({currentTab:i.value,searchData:o.value}),i.value!=="movie"&&(o.value.sort="updatedTime",o.value.name=o.value.keyword),i.value){case"movie":h.value=!0,me(o.value).then(e=>{e.data!==null?(u.value.movie=e.data.records,n.value.movie=e.data.total,_.value=Math.ceil(e.data.total/o.value.pageSize)):(u.value.movie=[],n.value.movie=0,_.value=0)});break;case"actress":ve(o.value).then(e=>{e.data!==null?(u.value.actress=e.data.records,n.value.actress=e.data.total,_.value=Math.ceil(e.data.total/o.value.pageSize)):(u.value.actress=[],n.value.actress=0,_.value=0)});break;default:h.value=!1;break}}function B(){o.value={keyword:"",name:"",viewCount:-1,favorite:!0,folder:null,sort:"favoriteTime",sortRule:"DESC",pageSize:20,page:1},v(i.value)}return K(()=>{const s=w.getCacheSearchData();s&&(i.value=s.data.currentTab,o.value=s.data.searchData),v(i.value),pe().then(e=>{e.data?n.value.movie=e.data:n.value.movie=0}),re().then(e=>{e.data?n.value.actress=e.data:n.value.actress=0}),$("favorite_series").then(e=>{e.data?(u.value.series=e.data.value.split("|"),n.value.series=u.value.series.length):(u.value.series=[],n.value.series=0)}),$("favorite_studio").then(e=>{e.data?(u.value.studio=e.data.value.split("|"),n.value.studio=u.value.studio.length):(u.value.studio=[],n.value.studio=0)})}),(s,e)=>{const E=Z,M=J,m=de,C=Q,R=W,N=X,c=ce,x=_e,O=fe,V=ge,g=Y,b=ee,y=ae,k=te,A=le,L=be,G=oe,j=ye;return r(),p(j,null,{default:t(()=>[a(G,{bordered:!1,class:"relative z-4 w-full rd-12px"},{default:t(()=>[a(V,{"default-expanded-names":["1"],class:"mb-xl"},{default:t(()=>[a(O,{title:s.$t("common.search"),name:"1"},{default:t(()=>[a(x,{"label-placement":"left","label-width":85,"require-mark-placement":"right-hanging",size:"small"},{default:t(()=>[a(m,{label:s.$t("page.library.searchKey")},{default:t(()=>[a(M,null,{default:t(()=>[a(E,{value:o.value.keyword,"onUpdate:value":e[0]||(e[0]=l=>o.value.keyword=l),type:"text",placeholder:"请输入标题关键词",class:"max-w-xl"},null,8,["value"])]),_:1})]),_:1},8,["label"]),a(c,{"item-style":"display: flex;",align:"center"},{default:t(()=>[a(m,{label:s.$t("common.sort")},{default:t(()=>[a(C,{value:o.value.sort,"onUpdate:value":[e[1]||(e[1]=l=>o.value.sort=l),e[2]||(e[2]=l=>v(i.value))],options:P,class:"w-40"},null,8,["value"])]),_:1},8,["label"]),a(m,null,{default:t(()=>[a(C,{value:o.value.sortRule,"onUpdate:value":[e[3]||(e[3]=l=>o.value.sortRule=l),e[4]||(e[4]=l=>v(i.value))],options:z(ue),class:"w-40"},null,8,["value","options"])]),_:1}),a(m,null,{default:t(()=>[a(R,{value:o.value.viewCount,"onUpdate:value":e[5]||(e[5]=l=>o.value.viewCount=l),"checked-value":0,"unchecked-value":-1,onUpdateValue:e[6]||(e[6]=l=>v(i.value))},{checked:t(()=>e[12]||(e[12]=[S("未播放")])),unchecked:t(()=>e[13]||(e[13]=[S("全部")])),_:1},8,["value"])]),_:1}),a(m,null,{default:t(()=>[a(N,{type:"primary",onClick:e[7]||(e[7]=l=>v(i.value))},{default:t(()=>[S(T(s.$t("common.search")),1)]),_:1})]),_:1}),a(m,null,{default:t(()=>[a(N,{type:"default",ghost:"",onClick:B},{default:t(()=>[S(T(s.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),a(A,{value:i.value,"justify-content":"space-evenly",type:"card",animated:"","onUpdate:value":v},{default:t(()=>[a(k,{name:"movie",tab:s.$t("page.favorites.movie")+"（"+n.value.movie+"）"},{default:t(()=>[n.value.movie==0?(r(),p(y,{key:0,size:"large",class:"ma-auto",description:"什么也没有"},{icon:t(()=>[a(b,null,{default:t(()=>[a(g,{icon:"solar:hand-heart-bold-duotone"})]),_:1})]),_:1})):f("",!0),a(c,{class:"ma-4"},{default:t(()=>[(r(!0),U(F,null,D(u.value.movie,l=>(r(),p(se,{key:l.file,movie:l,sort:"score"},null,8,["movie"]))),128))]),_:1})]),_:1},8,["tab"]),a(k,{name:"actress",tab:s.$t("route.category_actress")+"（"+n.value.actress+"）"},{default:t(()=>[n.value.actress==0?(r(),p(y,{key:0,size:"large",class:"ma-auto",description:"什么也没有"},{icon:t(()=>[a(b,null,{default:t(()=>[a(g,{icon:"solar:hand-heart-bold-duotone"})]),_:1})]),_:1})):f("",!0),a(c,{class:"ma-4"},{default:t(()=>[(r(!0),U(F,null,D(u.value.actress,l=>(r(),p(ne,{key:l.name,"show-second-title":!0,actress:l,sort:"score"},null,8,["actress"]))),128))]),_:1})]),_:1},8,["tab"]),a(k,{name:"studio",tab:s.$t("route.category_studio")+"（"+n.value.studio+"）"},{default:t(()=>[n.value.studio==0?(r(),p(y,{key:0,size:"large",class:"ma-auto",description:"什么也没有"},{icon:t(()=>[a(b,null,{default:t(()=>[a(g,{icon:"solar:hand-heart-bold-duotone"})]),_:1})]),_:1})):f("",!0),a(c,null,{default:t(()=>[a(I,{keys:u.value.studio,"storage-key":"favorite_studio",type:"studio"},null,8,["keys"])]),_:1})]),_:1},8,["tab"]),a(k,{name:"series",tab:s.$t("route.category_series")+"（"+n.value.series+"）"},{default:t(()=>[n.value.series==0?(r(),p(y,{key:0,size:"large",class:"ma-auto",description:"什么也没有"},{icon:t(()=>[a(b,null,{default:t(()=>[a(g,{icon:"solar:hand-heart-bold-duotone"})]),_:1})]),_:1})):f("",!0),a(c,null,{default:t(()=>[a(I,{keys:u.value.series,"storage-key":"favorite_series",type:"series"},null,8,["keys"])]),_:1})]),_:1},8,["tab"])]),_:1},8,["value"]),h.value?(r(),p(L,{key:0,page:o.value.page,"onUpdate:page":e[8]||(e[8]=l=>o.value.page=l),"page-size":o.value.pageSize,"onUpdate:pageSize":e[9]||(e[9]=l=>o.value.pageSize=l),"page-count":_.value,"show-size-picker":"","page-sizes":z(ie),onUpdatePage:e[10]||(e[10]=l=>v(i.value)),onUpdatePageSize:e[11]||(e[11]=l=>v(i.value))},null,8,["page","page-size","page-count","page-sizes"])):f("",!0)]),_:1})]),_:1})}}});export{xe as default};
